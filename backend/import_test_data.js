const { query } = require('./config/database');

async function importTestData() {
  try {
    console.log('ğŸ“¥ å¼€å§‹å¯¼å…¥æµ‹è¯•æ•°æ®...');
    
    // æ¸…ç©ºç°æœ‰ä»»åŠ¡æ•°æ®
    await query('DELETE FROM tasks WHERE student_id IN ("ST001", "ST002")');
    console.log('ğŸ—‘ï¸ æ¸…ç©ºç°æœ‰ä»»åŠ¡æ•°æ®');
    
    // æµ‹è¯•æ•°æ® - è®¾ç½®7æœˆ5æ—¥ä¸ºä¼‘æ¯æ—¥ï¼Œçœ‹æ˜¯å¦åœ¨7æœˆ6æ—¥æ˜¾ç¤º
    const testTasks = [
      // 7æœˆ1æ—¥ - æ­£å¸¸ä»»åŠ¡
      ['ST001', '2025-07-01', 'ä¸“ä¸šè¯¾', 'æ•°æ®ç»“æ„ä¸ç®—æ³•åŸºç¡€'],
      ['ST001', '2025-07-01', 'æ•°å­¦', 'é«˜ç­‰æ•°å­¦å¾®åˆ†å­¦'],
      ['ST001', '2025-07-01', 'è‹±è¯­', 'è€ƒç ”è¯æ±‡Unit1-10'],
      ['ST002', '2025-07-01', 'ä¸“ä¸šè¯¾', 'æ•°æ®ç»“æ„ä¸ç®—æ³•åŸºç¡€'],
      ['ST002', '2025-07-01', 'æ•°å­¦', 'é«˜ç­‰æ•°å­¦å¾®åˆ†å­¦'],
      ['ST002', '2025-07-01', 'è‹±è¯­', 'è€ƒç ”è¯æ±‡Unit1-10'],
      
      // 7æœˆ2æ—¥ - æ­£å¸¸ä»»åŠ¡
      ['ST001', '2025-07-02', 'ä¸“ä¸šè¯¾', 'æ“ä½œç³»ç»Ÿè¿›ç¨‹ç®¡ç†'],
      ['ST001', '2025-07-02', 'æ•°å­¦', 'é«˜ç­‰æ•°å­¦ç§¯åˆ†å­¦'],
      ['ST001', '2025-07-02', 'è‹±è¯­', 'é˜…è¯»ç†è§£ä¸“é¡¹è®­ç»ƒ'],
      ['ST002', '2025-07-02', 'ä¸“ä¸šè¯¾', 'æ“ä½œç³»ç»Ÿè¿›ç¨‹ç®¡ç†'],
      ['ST002', '2025-07-02', 'æ•°å­¦', 'é«˜ç­‰æ•°å­¦ç§¯åˆ†å­¦'],
      ['ST002', '2025-07-02', 'è‹±è¯­', 'é˜…è¯»ç†è§£ä¸“é¡¹è®­ç»ƒ'],
      
      // 7æœˆ3æ—¥ - æ­£å¸¸ä»»åŠ¡
      ['ST001', '2025-07-03', 'ä¸“ä¸šè¯¾', 'è®¡ç®—æœºç½‘ç»œTCP/IP'],
      ['ST001', '2025-07-03', 'æ•°å­¦', 'çº¿æ€§ä»£æ•°çŸ©é˜µè¿ç®—'],
      ['ST001', '2025-07-03', 'è‹±è¯­', 'å†™ä½œæŠ€å·§è®­ç»ƒ'],
      ['ST002', '2025-07-03', 'ä¸“ä¸šè¯¾', 'è®¡ç®—æœºç½‘ç»œTCP/IP'],
      ['ST002', '2025-07-03', 'æ•°å­¦', 'çº¿æ€§ä»£æ•°çŸ©é˜µè¿ç®—'],
      ['ST002', '2025-07-03', 'è‹±è¯­', 'å†™ä½œæŠ€å·§è®­ç»ƒ'],
      
      // 7æœˆ4æ—¥ - æ­£å¸¸ä»»åŠ¡
      ['ST001', '2025-07-04', 'ä¸“ä¸šè¯¾', 'æ•°æ®åº“ç³»ç»ŸåŸç†'],
      ['ST001', '2025-07-04', 'æ•°å­¦', 'æ¦‚ç‡è®ºåŸºç¡€æ¦‚å¿µ'],
      ['ST001', '2025-07-04', 'è‹±è¯­', 'ç¿»è¯‘æŠ€å·§ç»ƒä¹ '],
      ['ST002', '2025-07-04', 'ä¸“ä¸šè¯¾', 'æ•°æ®åº“ç³»ç»ŸåŸç†'],
      ['ST002', '2025-07-04', 'æ•°å­¦', 'æ¦‚ç‡è®ºåŸºç¡€æ¦‚å¿µ'],
      ['ST002', '2025-07-04', 'è‹±è¯­', 'ç¿»è¯‘æŠ€å·§ç»ƒä¹ '],
      
      // 7æœˆ5æ—¥ - ä¼‘æ¯æ—¥ï¼ˆæµ‹è¯•æ˜¯å¦åœ¨7æœˆ6æ—¥æ˜¾ç¤ºï¼‰
      ['ST001', '2025-07-05', 'ä¼‘æ¯', 'æµ‹è¯•ä¼‘æ¯æ—¥åç§»-åº”è¯¥æ˜¾ç¤ºåœ¨7æœˆ6æ—¥'],
      ['ST002', '2025-07-05', 'ä¼‘æ¯', 'æµ‹è¯•ä¼‘æ¯æ—¥åç§»-åº”è¯¥æ˜¾ç¤ºåœ¨7æœˆ6æ—¥'],
      
      // 7æœˆ6æ—¥ - æ­£å¸¸ä»»åŠ¡
      ['ST001', '2025-07-06', 'ä¸“ä¸šè¯¾', 'ç¼–è¯‘åŸç†è¯æ³•åˆ†æ'],
      ['ST001', '2025-07-06', 'æ•°å­¦', 'ç¦»æ•£æ•°å­¦å›¾è®º'],
      ['ST001', '2025-07-06', 'è‹±è¯­', 'è¯­æ³•ä¸“é¡¹å¤ä¹ '],
      ['ST002', '2025-07-06', 'ä¸“ä¸šè¯¾', 'ç¼–è¯‘åŸç†è¯æ³•åˆ†æ'],
      ['ST002', '2025-07-06', 'æ•°å­¦', 'ç¦»æ•£æ•°å­¦å›¾è®º'],
      ['ST002', '2025-07-06', 'è‹±è¯­', 'è¯­æ³•ä¸“é¡¹å¤ä¹ '],
      
      // 7æœˆ7æ—¥ - æ­£å¸¸ä»»åŠ¡
      ['ST001', '2025-07-07', 'ä¸“ä¸šè¯¾', 'äººå·¥æ™ºèƒ½æœºå™¨å­¦ä¹ '],
      ['ST001', '2025-07-07', 'æ•°å­¦', 'æ•°å€¼åˆ†ææ–¹æ³•'],
      ['ST001', '2025-07-07', 'è‹±è¯­', 'å®Œå½¢å¡«ç©ºç»ƒä¹ '],
      ['ST002', '2025-07-07', 'ä¸“ä¸šè¯¾', 'äººå·¥æ™ºèƒ½æœºå™¨å­¦ä¹ '],
      ['ST002', '2025-07-07', 'æ•°å­¦', 'æ•°å€¼åˆ†ææ–¹æ³•'],
      ['ST002', '2025-07-07', 'è‹±è¯­', 'å®Œå½¢å¡«ç©ºç»ƒä¹ '],
      
      // 7æœˆ12æ—¥ - ä¼‘æ¯æ—¥ï¼ˆæµ‹è¯•æ˜¯å¦åœ¨7æœˆ13æ—¥æ˜¾ç¤ºï¼‰
      ['ST001', '2025-07-12', 'ä¼‘æ¯', 'æµ‹è¯•ä¼‘æ¯æ—¥åç§»-åº”è¯¥æ˜¾ç¤ºåœ¨7æœˆ13æ—¥'],
      ['ST002', '2025-07-12', 'ä¼‘æ¯', 'æµ‹è¯•ä¼‘æ¯æ—¥åç§»-åº”è¯¥æ˜¾ç¤ºåœ¨7æœˆ13æ—¥'],
      
      // 7æœˆ13æ—¥ - æ­£å¸¸ä»»åŠ¡
      ['ST001', '2025-07-13', 'ä¸“ä¸šè¯¾', 'åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„'],
      ['ST001', '2025-07-13', 'æ•°å­¦', 'æ³›å‡½åˆ†æå…¥é—¨'],
      ['ST001', '2025-07-13', 'è‹±è¯­', 'è¯æ±‡è®°å¿†æŠ€å·§'],
      ['ST002', '2025-07-13', 'ä¸“ä¸šè¯¾', 'åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„'],
      ['ST002', '2025-07-13', 'æ•°å­¦', 'æ³›å‡½åˆ†æå…¥é—¨'],
      ['ST002', '2025-07-13', 'è‹±è¯­', 'è¯æ±‡è®°å¿†æŠ€å·§']
    ];
    
    // æ’å…¥æµ‹è¯•æ•°æ®
    for (const [studentId, date, type, title] of testTasks) {
      const taskId = `${studentId}_${date}_${type}_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
      
      await query(
        'INSERT INTO tasks (id, student_id, task_date, task_type, title) VALUES (?, ?, ?, ?, ?)',
        [taskId, studentId, date, type, title]
      );
    }
    
    console.log(`âœ… æˆåŠŸå¯¼å…¥ ${testTasks.length} ä¸ªæµ‹è¯•ä»»åŠ¡`);
    
    // éªŒè¯å¯¼å…¥ç»“æœ
    const result = await query(
      'SELECT task_date, task_type, COUNT(*) as count FROM tasks WHERE student_id = "ST001" GROUP BY task_date, task_type ORDER BY task_date'
    );
    
    console.log('ğŸ“Š å¯¼å…¥ç»“æœéªŒè¯:');
    result.forEach(row => {
      console.log(`  ${row.task_date}: ${row.task_type} (${row.count}ä¸ª)`);
    });
    
    console.log('\nğŸ¯ æµ‹è¯•é‡ç‚¹:');
    console.log('  - 7æœˆ5æ—¥è®¾ç½®ä¸ºä¼‘æ¯æ—¥ï¼Œæ£€æŸ¥æ˜¯å¦åœ¨7æœˆ6æ—¥æ˜¾ç¤º');
    console.log('  - 7æœˆ12æ—¥è®¾ç½®ä¸ºä¼‘æ¯æ—¥ï¼Œæ£€æŸ¥æ˜¯å¦åœ¨7æœˆ13æ—¥æ˜¾ç¤º');
    
    process.exit(0);
  } catch (error) {
    console.error('âŒ å¯¼å…¥æµ‹è¯•æ•°æ®å¤±è´¥:', error);
    process.exit(1);
  }
}

importTestData();
