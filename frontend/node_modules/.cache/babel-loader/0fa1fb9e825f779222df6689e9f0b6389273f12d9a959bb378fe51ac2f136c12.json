{"ast":null,"code":"import React,{useState,useEffect}from'react';import{taskAPI}from'../services/api';import{useApp}from'../contexts/AppContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MonthScreen=()=>{const{systemDate}=useApp();const[tasks,setTasks]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[selectedDate,setSelectedDate]=useState(null);const[currentMonth,setCurrentMonth]=useState(new Date(systemDate));// 格式化日期为YYYY-MM-DD\nconst formatDate=date=>{return date.toISOString().split('T')[0];};// 获取月度任务\nconst fetchMonthTasks=async month=>{try{setLoading(true);setError(null);const startDate=new Date(month.getFullYear(),month.getMonth(),1);const endDate=new Date(month.getFullYear(),month.getMonth()+1,0);const response=await taskAPI.getTasks(formatDate(startDate),formatDate(endDate));if(response.success){// 后端返回的是按日期分组的对象，需要转换为平面数组\nconst tasksByDate=response.data||{};const allTasks=[];Object.keys(tasksByDate).forEach(date=>{const dateTasks=tasksByDate[date]||[];dateTasks.forEach(task=>{allTasks.push({...task,date:date// 添加日期字段\n});});});setTasks(allTasks);}else{setError(response.message||'获取任务失败');}}catch(err){setError(err.message||'网络错误');}finally{setLoading(false);}};// 获取指定日期的任务\nconst getTasksForDate=date=>{const dateStr=formatDate(date);const taskArray=Array.isArray(tasks)?tasks:[];return taskArray.filter(task=>task.date===dateStr);};// 生成日历数据\nconst generateCalendarDays=()=>{const year=currentMonth.getFullYear();const month=currentMonth.getMonth();const firstDay=new Date(year,month,1);const lastDay=new Date(year,month+1,0);const startDate=new Date(firstDay);startDate.setDate(startDate.getDate()-firstDay.getDay());// 从周日开始\nconst days=[];const current=new Date(startDate);// 生成6周的日期（42天）\nfor(let i=0;i<42;i++){const dayTasks=getTasksForDate(current);const completedTasks=dayTasks.filter(task=>task.completed).length;const totalTasks=dayTasks.length;days.push({date:new Date(current),dayNumber:current.getDate(),isCurrentMonth:current.getMonth()===month,isToday:formatDate(current)===formatDate(systemDate),tasks:dayTasks,completedTasks,totalTasks,completionRate:totalTasks>0?Math.round(completedTasks/totalTasks*100):0});current.setDate(current.getDate()+1);}return days;};// 上一个月\nconst previousMonth=()=>{setCurrentMonth(prev=>new Date(prev.getFullYear(),prev.getMonth()-1,1));};// 下一个月\nconst nextMonth=()=>{setCurrentMonth(prev=>new Date(prev.getFullYear(),prev.getMonth()+1,1));};// 选择日期\nconst selectDate=date=>{setSelectedDate(date);};// 计算月度统计\nconst getMonthStats=()=>{const taskArray=Array.isArray(tasks)?tasks:[];const monthTasks=taskArray.filter(task=>{const taskDate=new Date(task.date);return taskDate.getMonth()===currentMonth.getMonth()&&taskDate.getFullYear()===currentMonth.getFullYear();});const completed=monthTasks.filter(task=>task.completed).length;const total=monthTasks.length;const completionRate=total>0?Math.round(completed/total*100):0;const totalStudyTime=monthTasks.reduce((acc,task)=>{if(task.duration){return acc+task.duration.hour*60+task.duration.minute;}return acc;},0);return{total,completed,completionRate,totalStudyTime:Math.round(totalStudyTime/60*10)/10// 转换为小时，保留1位小数\n};};useEffect(()=>{fetchMonthTasks(currentMonth);},[currentMonth]);const calendarDays=generateCalendarDays();const monthStats=getMonthStats();const weekDays=['日','一','二','三','四','五','六'];if(loading){return/*#__PURE__*/_jsx(\"div\",{\"data-testid\":\"month-screen\",className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-gray-600\",children:\"\\u52A0\\u8F7D\\u4E2D...\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{\"data-testid\":\"month-screen\",className:\"p-6 max-w-7xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-800 mb-2\",children:\"\\u6708\\u5EA6\\u4EFB\\u52A1\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"\\u67E5\\u770B\\u548C\\u7BA1\\u7406\\u6BCF\\u6708\\u7684\\u5B66\\u4E60\\u4EFB\\u52A1\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-md\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-4 gap-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-semibold text-gray-800\",children:[currentMonth.getFullYear(),\"\\u5E74\",currentMonth.getMonth()+1,\"\\u6708\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:previousMonth,className:\"px-3 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300\",children:\"\\u2190 \\u4E0A\\u6708\"}),/*#__PURE__*/_jsx(\"button\",{onClick:nextMonth,className:\"px-3 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300\",children:\"\\u4E0B\\u6708 \\u2192\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-7 gap-1 mb-2\",children:weekDays.map(day=>/*#__PURE__*/_jsx(\"div\",{className:\"text-center text-sm font-medium text-gray-500 py-2\",children:day},day))}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-7 gap-1\",children:calendarDays.map((day,index)=>/*#__PURE__*/_jsx(CalendarDay,{day:day,onSelect:selectDate,isSelected:selectedDate&&formatDate(selectedDate)===formatDate(day.date)},index))})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-800 mb-4\",children:\"\\u672C\\u6708\\u7EDF\\u8BA1\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-3xl font-bold text-blue-600 mb-1\",children:[monthStats.completionRate,\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:\"\\u5B8C\\u6210\\u7387\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"\\u603B\\u4EFB\\u52A1\\u6570\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:monthStats.total})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"\\u5DF2\\u5B8C\\u6210\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-green-600\",children:monthStats.completed})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"\\u672A\\u5B8C\\u6210\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-red-600\",children:monthStats.total-monthStats.completed})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"\\u5B66\\u4E60\\u65F6\\u957F\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold\",children:[monthStats.totalStudyTime,\"h\"]})]})]})]})]}),selectedDate&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-800 mb-4\",children:[selectedDate.getMonth()+1,\"\\u6708\",selectedDate.getDate(),\"\\u65E5\\u4EFB\\u52A1\"]}),getTasksForDate(selectedDate).length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-sm\",children:\"\\u5F53\\u65E5\\u65E0\\u4EFB\\u52A1\"}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:getTasksForDate(selectedDate).map(task=>/*#__PURE__*/_jsxs(\"div\",{className:`p-3 rounded border ${task.completed?'bg-green-50 border-green-200':'bg-gray-50 border-gray-200'}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:`w-3 h-3 rounded-full ${task.completed?'bg-green-500':'bg-gray-400'}`}),/*#__PURE__*/_jsx(\"span\",{className:`text-sm font-medium ${task.completed?'text-green-700':'text-gray-700'}`,children:task.title||'任务标题'})]}),task.duration&&(task.duration.hour>0||task.duration.minute>0)&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1 text-xs text-gray-500 ml-5\",children:[\"\\u7528\\u65F6: \",task.duration.hour,\"\\u65F6\",task.duration.minute,\"\\u5206\"]})]},task.id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-800 mb-4\",children:\"\\u72B6\\u6001\\u8BF4\\u660E\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 bg-green-100 border border-green-200 rounded\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u4EFB\\u52A1\\u5168\\u90E8\\u5B8C\\u6210\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 bg-yellow-100 border border-yellow-200 rounded\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u90E8\\u5206\\u4EFB\\u52A1\\u5B8C\\u6210\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 bg-red-100 border border-red-200 rounded\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u4EFB\\u52A1\\u672A\\u5B8C\\u6210\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 bg-yellow-50 border border-yellow-300 rounded\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83C\\uDFE0 \\u5DF2\\u8BF7\\u5047\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 bg-blue-50 border border-blue-300 rounded\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDE34 \\u4F11\\u606F\\u65E5\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 bg-gray-50 border border-gray-200 rounded\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u65E0\\u4EFB\\u52A1\\u5B89\\u6392\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-800 mb-4\",children:\"\\u5FEB\\u901F\\u5BFC\\u822A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setCurrentMonth(new Date(systemDate));setSelectedDate(systemDate);},className:\"w-full px-3 py-2 text-left text-sm bg-blue-50 text-blue-700 rounded hover:bg-blue-100\",children:\"\\u56DE\\u5230\\u4ECA\\u65E5\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentMonth(new Date()),className:\"w-full px-3 py-2 text-left text-sm bg-gray-50 text-gray-700 rounded hover:bg-gray-100\",children:\"\\u5F53\\u524D\\u6708\\u4EFD\"})]})]})]})]})]});};// 日历单元格组件\nconst CalendarDay=_ref=>{let{day,onSelect,isSelected}=_ref;// 检查是否有请假或休息任务\nconst hasLeaveTask=day.tasks.some(task=>task.type==='leave');const hasRestTask=day.tasks.some(task=>task.type==='休息');const getCompletionColor=()=>{if(hasLeaveTask)return'bg-yellow-50';// 请假日\nif(hasRestTask)return'bg-blue-50';// 休息日\nif(day.totalTasks===0)return'bg-gray-50';if(day.completionRate===100)return'bg-green-100';if(day.completionRate>=50)return'bg-yellow-100';return'bg-red-100';};const getBorderColor=()=>{if(isSelected)return'border-blue-500 border-2';if(day.isToday)return'border-blue-300 border-2';if(hasLeaveTask)return'border-yellow-300';if(hasRestTask)return'border-blue-300';return'border-gray-200';};const getStatusIcon=()=>{if(hasLeaveTask)return'🏠';// 请假\nif(hasRestTask)return'😴';// 休息\nreturn null;};return/*#__PURE__*/_jsxs(\"div\",{onClick:()=>onSelect(day.date),className:`\n        relative h-24 p-1 border cursor-pointer hover:bg-gray-50 transition-colors\n        ${getBorderColor()}\n        ${getCompletionColor()}\n        ${!day.isCurrentMonth?'opacity-30':''}\n      `,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start h-full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:`text-sm font-medium ${day.isToday?'text-blue-600':day.isCurrentMonth?'text-gray-900':'text-gray-400'}`,children:day.dayNumber}),getStatusIcon()&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs\",children:getStatusIcon()})]}),day.totalTasks>0&&!hasLeaveTask&&!hasRestTask&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-600\",children:[day.completedTasks,\"/\",day.totalTasks]}),day.completionRate>0&&/*#__PURE__*/_jsxs(\"div\",{className:`text-xs font-semibold ${day.completionRate===100?'text-green-600':day.completionRate>=50?'text-yellow-600':'text-red-600'}`,children:[day.completionRate,\"%\"]})]}),hasLeaveTask&&/*#__PURE__*/_jsx(\"div\",{className:\"text-right\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-yellow-600 font-semibold\",children:\"\\u5DF2\\u8BF7\\u5047\"})}),hasRestTask&&!hasLeaveTask&&/*#__PURE__*/_jsx(\"div\",{className:\"text-right\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-blue-600 font-semibold\",children:\"\\u4F11\\u606F\\u65E5\"})})]}),day.totalTasks>0&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-1 left-1 right-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-1\",children:[Array.from({length:Math.min(day.totalTasks,5)}).map((_,index)=>/*#__PURE__*/_jsx(\"div\",{className:`h-1 flex-1 rounded ${index<day.completedTasks?'bg-green-500':'bg-gray-300'}`},index)),day.totalTasks>5&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500\",children:\"+\"})]})})]});};export default MonthScreen;","map":{"version":3,"names":["React","useState","useEffect","taskAPI","useApp","jsx","_jsx","jsxs","_jsxs","MonthScreen","systemDate","tasks","setTasks","loading","setLoading","error","setError","selectedDate","setSelectedDate","currentMonth","setCurrentMonth","Date","formatDate","date","toISOString","split","fetchMonthTasks","month","startDate","getFullYear","getMonth","endDate","response","getTasks","success","tasksByDate","data","allTasks","Object","keys","forEach","dateTasks","task","push","message","err","getTasksForDate","dateStr","taskArray","Array","isArray","filter","generateCalendarDays","year","firstDay","lastDay","setDate","getDate","getDay","days","current","i","dayTasks","completedTasks","completed","length","totalTasks","dayNumber","isCurrentMonth","isToday","completionRate","Math","round","previousMonth","prev","nextMonth","selectDate","getMonthStats","monthTasks","taskDate","total","totalStudyTime","reduce","acc","duration","hour","minute","calendarDays","monthStats","weekDays","className","children","onClick","map","day","index","CalendarDay","onSelect","isSelected","title","id","_ref","hasLeaveTask","some","type","hasRestTask","getCompletionColor","getBorderColor","getStatusIcon","from","min","_"],"sources":["/Users/danieldong/Documents/GitHub/gougegaoshu/frontend/src/components/MonthScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { taskAPI } from '../services/api';\nimport { useApp } from '../contexts/AppContext';\n\nconst MonthScreen = () => {\n  const { systemDate } = useApp();\n  const [tasks, setTasks] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [selectedDate, setSelectedDate] = useState(null);\n  const [currentMonth, setCurrentMonth] = useState(new Date(systemDate));\n\n  // 格式化日期为YYYY-MM-DD\n  const formatDate = (date) => {\n    return date.toISOString().split('T')[0];\n  };\n\n  // 获取月度任务\n  const fetchMonthTasks = async (month) => {\n    try {\n      setLoading(true);\n      setError(null);\n      \n      const startDate = new Date(month.getFullYear(), month.getMonth(), 1);\n      const endDate = new Date(month.getFullYear(), month.getMonth() + 1, 0);\n      \n      const response = await taskAPI.getTasks(\n        formatDate(startDate), \n        formatDate(endDate)\n      );\n      \n      if (response.success) {\n        // 后端返回的是按日期分组的对象，需要转换为平面数组\n        const tasksByDate = response.data || {};\n        const allTasks = [];\n        \n        Object.keys(tasksByDate).forEach(date => {\n          const dateTasks = tasksByDate[date] || [];\n          dateTasks.forEach(task => {\n            allTasks.push({\n              ...task,\n              date: date // 添加日期字段\n            });\n          });\n        });\n        \n        setTasks(allTasks);\n      } else {\n        setError(response.message || '获取任务失败');\n      }\n    } catch (err) {\n      setError(err.message || '网络错误');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 获取指定日期的任务\n  const getTasksForDate = (date) => {\n    const dateStr = formatDate(date);\n    const taskArray = Array.isArray(tasks) ? tasks : [];\n    return taskArray.filter(task => task.date === dateStr);\n  };\n\n  // 生成日历数据\n  const generateCalendarDays = () => {\n    const year = currentMonth.getFullYear();\n    const month = currentMonth.getMonth();\n    \n    const firstDay = new Date(year, month, 1);\n    const lastDay = new Date(year, month + 1, 0);\n    const startDate = new Date(firstDay);\n    startDate.setDate(startDate.getDate() - firstDay.getDay()); // 从周日开始\n    \n    const days = [];\n    const current = new Date(startDate);\n    \n    // 生成6周的日期（42天）\n    for (let i = 0; i < 42; i++) {\n      const dayTasks = getTasksForDate(current);\n      const completedTasks = dayTasks.filter(task => task.completed).length;\n      const totalTasks = dayTasks.length;\n      \n      days.push({\n        date: new Date(current),\n        dayNumber: current.getDate(),\n        isCurrentMonth: current.getMonth() === month,\n        isToday: formatDate(current) === formatDate(systemDate),\n        tasks: dayTasks,\n        completedTasks,\n        totalTasks,\n        completionRate: totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0\n      });\n      \n      current.setDate(current.getDate() + 1);\n    }\n    \n    return days;\n  };\n\n  // 上一个月\n  const previousMonth = () => {\n    setCurrentMonth(prev => new Date(prev.getFullYear(), prev.getMonth() - 1, 1));\n  };\n\n  // 下一个月\n  const nextMonth = () => {\n    setCurrentMonth(prev => new Date(prev.getFullYear(), prev.getMonth() + 1, 1));\n  };\n\n  // 选择日期\n  const selectDate = (date) => {\n    setSelectedDate(date);\n  };\n\n  // 计算月度统计\n  const getMonthStats = () => {\n    const taskArray = Array.isArray(tasks) ? tasks : [];\n    const monthTasks = taskArray.filter(task => {\n      const taskDate = new Date(task.date);\n      return taskDate.getMonth() === currentMonth.getMonth() && \n             taskDate.getFullYear() === currentMonth.getFullYear();\n    });\n    \n    const completed = monthTasks.filter(task => task.completed).length;\n    const total = monthTasks.length;\n    const completionRate = total > 0 ? Math.round((completed / total) * 100) : 0;\n    \n    const totalStudyTime = monthTasks.reduce((acc, task) => {\n      if (task.duration) {\n        return acc + (task.duration.hour * 60) + task.duration.minute;\n      }\n      return acc;\n    }, 0);\n    \n    return {\n      total,\n      completed,\n      completionRate,\n      totalStudyTime: Math.round(totalStudyTime / 60 * 10) / 10 // 转换为小时，保留1位小数\n    };\n  };\n\n  useEffect(() => {\n    fetchMonthTasks(currentMonth);\n  }, [currentMonth]);\n\n  const calendarDays = generateCalendarDays();\n  const monthStats = getMonthStats();\n  const weekDays = ['日', '一', '二', '三', '四', '五', '六'];\n\n  if (loading) {\n    return (\n      <div data-testid=\"month-screen\" className=\"p-6\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto\"></div>\n          <p className=\"mt-2 text-gray-600\">加载中...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div data-testid=\"month-screen\" className=\"p-6 max-w-7xl mx-auto\">\n      <div className=\"mb-6\">\n        <h1 className=\"text-2xl font-bold text-gray-800 mb-2\">月度任务</h1>\n        <p className=\"text-gray-600\">查看和管理每月的学习任务</p>\n      </div>\n\n      {error && (\n        <div className=\"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-md\">\n          {error}\n        </div>\n      )}\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6\">\n        {/* 日历视图 */}\n        <div className=\"lg:col-span-3\">\n          <div className=\"bg-white rounded-lg shadow-md p-6\">\n            {/* 日历头部 */}\n            <div className=\"flex items-center justify-between mb-6\">\n              <h2 className=\"text-xl font-semibold text-gray-800\">\n                {currentMonth.getFullYear()}年{currentMonth.getMonth() + 1}月\n              </h2>\n              <div className=\"flex space-x-2\">\n                <button\n                  onClick={previousMonth}\n                  className=\"px-3 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300\"\n                >\n                  ← 上月\n                </button>\n                <button\n                  onClick={nextMonth}\n                  className=\"px-3 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300\"\n                >\n                  下月 →\n                </button>\n              </div>\n            </div>\n\n            {/* 星期标题 */}\n            <div className=\"grid grid-cols-7 gap-1 mb-2\">\n              {weekDays.map(day => (\n                <div key={day} className=\"text-center text-sm font-medium text-gray-500 py-2\">\n                  {day}\n                </div>\n              ))}\n            </div>\n\n            {/* 日历网格 */}\n            <div className=\"grid grid-cols-7 gap-1\">\n              {calendarDays.map((day, index) => (\n                <CalendarDay\n                  key={index}\n                  day={day}\n                  onSelect={selectDate}\n                  isSelected={selectedDate && formatDate(selectedDate) === formatDate(day.date)}\n                />\n              ))}\n            </div>\n          </div>\n        </div>\n\n        {/* 侧边栏 */}\n        <div className=\"space-y-6\">\n          {/* 月度统计 */}\n          <div className=\"bg-white rounded-lg shadow-md p-6\">\n            <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">本月统计</h3>\n            <div className=\"space-y-4\">\n              <div className=\"text-center\">\n                <div className=\"text-3xl font-bold text-blue-600 mb-1\">\n                  {monthStats.completionRate}%\n                </div>\n                <div className=\"text-sm text-gray-600\">完成率</div>\n              </div>\n              \n              <div className=\"space-y-3 text-sm\">\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">总任务数</span>\n                  <span className=\"font-semibold\">{monthStats.total}</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">已完成</span>\n                  <span className=\"font-semibold text-green-600\">{monthStats.completed}</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">未完成</span>\n                  <span className=\"font-semibold text-red-600\">\n                    {monthStats.total - monthStats.completed}\n                  </span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">学习时长</span>\n                  <span className=\"font-semibold\">{monthStats.totalStudyTime}h</span>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* 选中日期的任务 */}\n          {selectedDate && (\n            <div className=\"bg-white rounded-lg shadow-md p-6\">\n              <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">\n                {selectedDate.getMonth() + 1}月{selectedDate.getDate()}日任务\n              </h3>\n              \n              {getTasksForDate(selectedDate).length === 0 ? (\n                <p className=\"text-gray-500 text-sm\">当日无任务</p>\n              ) : (\n                <div className=\"space-y-3\">\n                  {getTasksForDate(selectedDate).map(task => (\n                    <div\n                      key={task.id}\n                      className={`p-3 rounded border ${\n                        task.completed \n                          ? 'bg-green-50 border-green-200' \n                          : 'bg-gray-50 border-gray-200'\n                      }`}\n                    >\n                      <div className=\"flex items-center space-x-2\">\n                        <div className={`w-3 h-3 rounded-full ${\n                          task.completed ? 'bg-green-500' : 'bg-gray-400'\n                        }`} />\n                        <span className={`text-sm font-medium ${\n                          task.completed ? 'text-green-700' : 'text-gray-700'\n                        }`}>\n                          {task.title || '任务标题'}\n                        </span>\n                      </div>\n                      {task.duration && (task.duration.hour > 0 || task.duration.minute > 0) && (\n                        <div className=\"mt-1 text-xs text-gray-500 ml-5\">\n                          用时: {task.duration.hour}时{task.duration.minute}分\n                        </div>\n                      )}\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* 状态图例 */}\n          <div className=\"bg-white rounded-lg shadow-md p-6\">\n            <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">状态说明</h3>\n            <div className=\"space-y-3 text-sm\">\n              <div className=\"flex items-center space-x-2\">\n                <div className=\"w-4 h-4 bg-green-100 border border-green-200 rounded\"></div>\n                <span>任务全部完成</span>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <div className=\"w-4 h-4 bg-yellow-100 border border-yellow-200 rounded\"></div>\n                <span>部分任务完成</span>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <div className=\"w-4 h-4 bg-red-100 border border-red-200 rounded\"></div>\n                <span>任务未完成</span>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <div className=\"w-4 h-4 bg-yellow-50 border border-yellow-300 rounded\"></div>\n                <span>🏠 已请假</span>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <div className=\"w-4 h-4 bg-blue-50 border border-blue-300 rounded\"></div>\n                <span>😴 休息日</span>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <div className=\"w-4 h-4 bg-gray-50 border border-gray-200 rounded\"></div>\n                <span>无任务安排</span>\n              </div>\n            </div>\n          </div>\n\n          {/* 快速导航 */}\n          <div className=\"bg-white rounded-lg shadow-md p-6\">\n            <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">快速导航</h3>\n            <div className=\"space-y-2\">\n              <button\n                onClick={() => {\n                  setCurrentMonth(new Date(systemDate));\n                  setSelectedDate(systemDate);\n                }}\n                className=\"w-full px-3 py-2 text-left text-sm bg-blue-50 text-blue-700 rounded hover:bg-blue-100\"\n              >\n                回到今日\n              </button>\n              <button\n                onClick={() => setCurrentMonth(new Date())}\n                className=\"w-full px-3 py-2 text-left text-sm bg-gray-50 text-gray-700 rounded hover:bg-gray-100\"\n              >\n                当前月份\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// 日历单元格组件\nconst CalendarDay = ({ day, onSelect, isSelected }) => {\n  // 检查是否有请假或休息任务\n  const hasLeaveTask = day.tasks.some(task => task.type === 'leave');\n  const hasRestTask = day.tasks.some(task => task.type === '休息');\n  \n  const getCompletionColor = () => {\n    if (hasLeaveTask) return 'bg-yellow-50'; // 请假日\n    if (hasRestTask) return 'bg-blue-50'; // 休息日\n    if (day.totalTasks === 0) return 'bg-gray-50';\n    if (day.completionRate === 100) return 'bg-green-100';\n    if (day.completionRate >= 50) return 'bg-yellow-100';\n    return 'bg-red-100';\n  };\n\n  const getBorderColor = () => {\n    if (isSelected) return 'border-blue-500 border-2';\n    if (day.isToday) return 'border-blue-300 border-2';\n    if (hasLeaveTask) return 'border-yellow-300';\n    if (hasRestTask) return 'border-blue-300';\n    return 'border-gray-200';\n  };\n\n  const getStatusIcon = () => {\n    if (hasLeaveTask) return '🏠'; // 请假\n    if (hasRestTask) return '😴'; // 休息\n    return null;\n  };\n\n  return (\n    <div\n      onClick={() => onSelect(day.date)}\n      className={`\n        relative h-24 p-1 border cursor-pointer hover:bg-gray-50 transition-colors\n        ${getBorderColor()}\n        ${getCompletionColor()}\n        ${!day.isCurrentMonth ? 'opacity-30' : ''}\n      `}\n    >\n      <div className=\"flex justify-between items-start h-full\">\n        <div className=\"flex items-center space-x-1\">\n          <span className={`text-sm font-medium ${\n            day.isToday ? 'text-blue-600' : \n            day.isCurrentMonth ? 'text-gray-900' : 'text-gray-400'\n          }`}>\n            {day.dayNumber}\n          </span>\n          {getStatusIcon() && (\n            <span className=\"text-xs\">{getStatusIcon()}</span>\n          )}\n        </div>\n        \n        {(day.totalTasks > 0 && !hasLeaveTask && !hasRestTask) && (\n          <div className=\"text-right\">\n            <div className=\"text-xs text-gray-600\">\n              {day.completedTasks}/{day.totalTasks}\n            </div>\n            {day.completionRate > 0 && (\n              <div className={`text-xs font-semibold ${\n                day.completionRate === 100 ? 'text-green-600' :\n                day.completionRate >= 50 ? 'text-yellow-600' : 'text-red-600'\n              }`}>\n                {day.completionRate}%\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* 特殊状态显示 */}\n        {hasLeaveTask && (\n          <div className=\"text-right\">\n            <div className=\"text-xs text-yellow-600 font-semibold\">已请假</div>\n          </div>\n        )}\n        \n        {hasRestTask && !hasLeaveTask && (\n          <div className=\"text-right\">\n            <div className=\"text-xs text-blue-600 font-semibold\">休息日</div>\n          </div>\n        )}\n      </div>\n      \n      {/* 任务指示器 */}\n      {day.totalTasks > 0 && (\n        <div className=\"absolute bottom-1 left-1 right-1\">\n          <div className=\"flex space-x-1\">\n            {Array.from({ length: Math.min(day.totalTasks, 5) }).map((_, index) => (\n              <div\n                key={index}\n                className={`h-1 flex-1 rounded ${\n                  index < day.completedTasks ? 'bg-green-500' : 'bg-gray-300'\n                }`}\n              />\n            ))}\n            {day.totalTasks > 5 && (\n              <span className=\"text-xs text-gray-500\">+</span>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default MonthScreen;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,OAAO,KAAQ,iBAAiB,CACzC,OAASC,MAAM,KAAQ,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEhD,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CACxB,KAAM,CAAEC,UAAW,CAAC,CAAGN,MAAM,CAAC,CAAC,CAC/B,KAAM,CAACO,KAAK,CAAEC,QAAQ,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACY,OAAO,CAAEC,UAAU,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACc,KAAK,CAAEC,QAAQ,CAAC,CAAGf,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAACgB,YAAY,CAAEC,eAAe,CAAC,CAAGjB,QAAQ,CAAC,IAAI,CAAC,CACtD,KAAM,CAACkB,YAAY,CAAEC,eAAe,CAAC,CAAGnB,QAAQ,CAAC,GAAI,CAAAoB,IAAI,CAACX,UAAU,CAAC,CAAC,CAEtE;AACA,KAAM,CAAAY,UAAU,CAAIC,IAAI,EAAK,CAC3B,MAAO,CAAAA,IAAI,CAACC,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CACzC,CAAC,CAED;AACA,KAAM,CAAAC,eAAe,CAAG,KAAO,CAAAC,KAAK,EAAK,CACvC,GAAI,CACFb,UAAU,CAAC,IAAI,CAAC,CAChBE,QAAQ,CAAC,IAAI,CAAC,CAEd,KAAM,CAAAY,SAAS,CAAG,GAAI,CAAAP,IAAI,CAACM,KAAK,CAACE,WAAW,CAAC,CAAC,CAAEF,KAAK,CAACG,QAAQ,CAAC,CAAC,CAAE,CAAC,CAAC,CACpE,KAAM,CAAAC,OAAO,CAAG,GAAI,CAAAV,IAAI,CAACM,KAAK,CAACE,WAAW,CAAC,CAAC,CAAEF,KAAK,CAACG,QAAQ,CAAC,CAAC,CAAG,CAAC,CAAE,CAAC,CAAC,CAEtE,KAAM,CAAAE,QAAQ,CAAG,KAAM,CAAA7B,OAAO,CAAC8B,QAAQ,CACrCX,UAAU,CAACM,SAAS,CAAC,CACrBN,UAAU,CAACS,OAAO,CACpB,CAAC,CAED,GAAIC,QAAQ,CAACE,OAAO,CAAE,CACpB;AACA,KAAM,CAAAC,WAAW,CAAGH,QAAQ,CAACI,IAAI,EAAI,CAAC,CAAC,CACvC,KAAM,CAAAC,QAAQ,CAAG,EAAE,CAEnBC,MAAM,CAACC,IAAI,CAACJ,WAAW,CAAC,CAACK,OAAO,CAACjB,IAAI,EAAI,CACvC,KAAM,CAAAkB,SAAS,CAAGN,WAAW,CAACZ,IAAI,CAAC,EAAI,EAAE,CACzCkB,SAAS,CAACD,OAAO,CAACE,IAAI,EAAI,CACxBL,QAAQ,CAACM,IAAI,CAAC,CACZ,GAAGD,IAAI,CACPnB,IAAI,CAAEA,IAAK;AACb,CAAC,CAAC,CACJ,CAAC,CAAC,CACJ,CAAC,CAAC,CAEFX,QAAQ,CAACyB,QAAQ,CAAC,CACpB,CAAC,IAAM,CACLrB,QAAQ,CAACgB,QAAQ,CAACY,OAAO,EAAI,QAAQ,CAAC,CACxC,CACF,CAAE,MAAOC,GAAG,CAAE,CACZ7B,QAAQ,CAAC6B,GAAG,CAACD,OAAO,EAAI,MAAM,CAAC,CACjC,CAAC,OAAS,CACR9B,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED;AACA,KAAM,CAAAgC,eAAe,CAAIvB,IAAI,EAAK,CAChC,KAAM,CAAAwB,OAAO,CAAGzB,UAAU,CAACC,IAAI,CAAC,CAChC,KAAM,CAAAyB,SAAS,CAAGC,KAAK,CAACC,OAAO,CAACvC,KAAK,CAAC,CAAGA,KAAK,CAAG,EAAE,CACnD,MAAO,CAAAqC,SAAS,CAACG,MAAM,CAACT,IAAI,EAAIA,IAAI,CAACnB,IAAI,GAAKwB,OAAO,CAAC,CACxD,CAAC,CAED;AACA,KAAM,CAAAK,oBAAoB,CAAGA,CAAA,GAAM,CACjC,KAAM,CAAAC,IAAI,CAAGlC,YAAY,CAACU,WAAW,CAAC,CAAC,CACvC,KAAM,CAAAF,KAAK,CAAGR,YAAY,CAACW,QAAQ,CAAC,CAAC,CAErC,KAAM,CAAAwB,QAAQ,CAAG,GAAI,CAAAjC,IAAI,CAACgC,IAAI,CAAE1B,KAAK,CAAE,CAAC,CAAC,CACzC,KAAM,CAAA4B,OAAO,CAAG,GAAI,CAAAlC,IAAI,CAACgC,IAAI,CAAE1B,KAAK,CAAG,CAAC,CAAE,CAAC,CAAC,CAC5C,KAAM,CAAAC,SAAS,CAAG,GAAI,CAAAP,IAAI,CAACiC,QAAQ,CAAC,CACpC1B,SAAS,CAAC4B,OAAO,CAAC5B,SAAS,CAAC6B,OAAO,CAAC,CAAC,CAAGH,QAAQ,CAACI,MAAM,CAAC,CAAC,CAAC,CAAE;AAE5D,KAAM,CAAAC,IAAI,CAAG,EAAE,CACf,KAAM,CAAAC,OAAO,CAAG,GAAI,CAAAvC,IAAI,CAACO,SAAS,CAAC,CAEnC;AACA,IAAK,GAAI,CAAAiC,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAG,EAAE,CAAEA,CAAC,EAAE,CAAE,CAC3B,KAAM,CAAAC,QAAQ,CAAGhB,eAAe,CAACc,OAAO,CAAC,CACzC,KAAM,CAAAG,cAAc,CAAGD,QAAQ,CAACX,MAAM,CAACT,IAAI,EAAIA,IAAI,CAACsB,SAAS,CAAC,CAACC,MAAM,CACrE,KAAM,CAAAC,UAAU,CAAGJ,QAAQ,CAACG,MAAM,CAElCN,IAAI,CAAChB,IAAI,CAAC,CACRpB,IAAI,CAAE,GAAI,CAAAF,IAAI,CAACuC,OAAO,CAAC,CACvBO,SAAS,CAAEP,OAAO,CAACH,OAAO,CAAC,CAAC,CAC5BW,cAAc,CAAER,OAAO,CAAC9B,QAAQ,CAAC,CAAC,GAAKH,KAAK,CAC5C0C,OAAO,CAAE/C,UAAU,CAACsC,OAAO,CAAC,GAAKtC,UAAU,CAACZ,UAAU,CAAC,CACvDC,KAAK,CAAEmD,QAAQ,CACfC,cAAc,CACdG,UAAU,CACVI,cAAc,CAAEJ,UAAU,CAAG,CAAC,CAAGK,IAAI,CAACC,KAAK,CAAET,cAAc,CAAGG,UAAU,CAAI,GAAG,CAAC,CAAG,CACrF,CAAC,CAAC,CAEFN,OAAO,CAACJ,OAAO,CAACI,OAAO,CAACH,OAAO,CAAC,CAAC,CAAG,CAAC,CAAC,CACxC,CAEA,MAAO,CAAAE,IAAI,CACb,CAAC,CAED;AACA,KAAM,CAAAc,aAAa,CAAGA,CAAA,GAAM,CAC1BrD,eAAe,CAACsD,IAAI,EAAI,GAAI,CAAArD,IAAI,CAACqD,IAAI,CAAC7C,WAAW,CAAC,CAAC,CAAE6C,IAAI,CAAC5C,QAAQ,CAAC,CAAC,CAAG,CAAC,CAAE,CAAC,CAAC,CAAC,CAC/E,CAAC,CAED;AACA,KAAM,CAAA6C,SAAS,CAAGA,CAAA,GAAM,CACtBvD,eAAe,CAACsD,IAAI,EAAI,GAAI,CAAArD,IAAI,CAACqD,IAAI,CAAC7C,WAAW,CAAC,CAAC,CAAE6C,IAAI,CAAC5C,QAAQ,CAAC,CAAC,CAAG,CAAC,CAAE,CAAC,CAAC,CAAC,CAC/E,CAAC,CAED;AACA,KAAM,CAAA8C,UAAU,CAAIrD,IAAI,EAAK,CAC3BL,eAAe,CAACK,IAAI,CAAC,CACvB,CAAC,CAED;AACA,KAAM,CAAAsD,aAAa,CAAGA,CAAA,GAAM,CAC1B,KAAM,CAAA7B,SAAS,CAAGC,KAAK,CAACC,OAAO,CAACvC,KAAK,CAAC,CAAGA,KAAK,CAAG,EAAE,CACnD,KAAM,CAAAmE,UAAU,CAAG9B,SAAS,CAACG,MAAM,CAACT,IAAI,EAAI,CAC1C,KAAM,CAAAqC,QAAQ,CAAG,GAAI,CAAA1D,IAAI,CAACqB,IAAI,CAACnB,IAAI,CAAC,CACpC,MAAO,CAAAwD,QAAQ,CAACjD,QAAQ,CAAC,CAAC,GAAKX,YAAY,CAACW,QAAQ,CAAC,CAAC,EAC/CiD,QAAQ,CAAClD,WAAW,CAAC,CAAC,GAAKV,YAAY,CAACU,WAAW,CAAC,CAAC,CAC9D,CAAC,CAAC,CAEF,KAAM,CAAAmC,SAAS,CAAGc,UAAU,CAAC3B,MAAM,CAACT,IAAI,EAAIA,IAAI,CAACsB,SAAS,CAAC,CAACC,MAAM,CAClE,KAAM,CAAAe,KAAK,CAAGF,UAAU,CAACb,MAAM,CAC/B,KAAM,CAAAK,cAAc,CAAGU,KAAK,CAAG,CAAC,CAAGT,IAAI,CAACC,KAAK,CAAER,SAAS,CAAGgB,KAAK,CAAI,GAAG,CAAC,CAAG,CAAC,CAE5E,KAAM,CAAAC,cAAc,CAAGH,UAAU,CAACI,MAAM,CAAC,CAACC,GAAG,CAAEzC,IAAI,GAAK,CACtD,GAAIA,IAAI,CAAC0C,QAAQ,CAAE,CACjB,MAAO,CAAAD,GAAG,CAAIzC,IAAI,CAAC0C,QAAQ,CAACC,IAAI,CAAG,EAAG,CAAG3C,IAAI,CAAC0C,QAAQ,CAACE,MAAM,CAC/D,CACA,MAAO,CAAAH,GAAG,CACZ,CAAC,CAAE,CAAC,CAAC,CAEL,MAAO,CACLH,KAAK,CACLhB,SAAS,CACTM,cAAc,CACdW,cAAc,CAAEV,IAAI,CAACC,KAAK,CAACS,cAAc,CAAG,EAAE,CAAG,EAAE,CAAC,CAAG,EAAG;AAC5D,CAAC,CACH,CAAC,CAED/E,SAAS,CAAC,IAAM,CACdwB,eAAe,CAACP,YAAY,CAAC,CAC/B,CAAC,CAAE,CAACA,YAAY,CAAC,CAAC,CAElB,KAAM,CAAAoE,YAAY,CAAGnC,oBAAoB,CAAC,CAAC,CAC3C,KAAM,CAAAoC,UAAU,CAAGX,aAAa,CAAC,CAAC,CAClC,KAAM,CAAAY,QAAQ,CAAG,CAAC,GAAG,CAAE,GAAG,CAAE,GAAG,CAAE,GAAG,CAAE,GAAG,CAAE,GAAG,CAAE,GAAG,CAAC,CAEpD,GAAI5E,OAAO,CAAE,CACX,mBACEP,IAAA,QAAK,cAAY,cAAc,CAACoF,SAAS,CAAC,KAAK,CAAAC,QAAA,cAC7CnF,KAAA,QAAKkF,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BrF,IAAA,QAAKoF,SAAS,CAAC,sEAAsE,CAAM,CAAC,cAC5FpF,IAAA,MAAGoF,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAC,uBAAM,CAAG,CAAC,EACzC,CAAC,CACH,CAAC,CAEV,CAEA,mBACEnF,KAAA,QAAK,cAAY,cAAc,CAACkF,SAAS,CAAC,uBAAuB,CAAAC,QAAA,eAC/DnF,KAAA,QAAKkF,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBrF,IAAA,OAAIoF,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CAAC,0BAAI,CAAI,CAAC,cAC/DrF,IAAA,MAAGoF,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,0EAAY,CAAG,CAAC,EAC1C,CAAC,CAEL5E,KAAK,eACJT,IAAA,QAAKoF,SAAS,CAAC,mEAAmE,CAAAC,QAAA,CAC/E5E,KAAK,CACH,CACN,cAEDP,KAAA,QAAKkF,SAAS,CAAC,uCAAuC,CAAAC,QAAA,eAEpDrF,IAAA,QAAKoF,SAAS,CAAC,eAAe,CAAAC,QAAA,cAC5BnF,KAAA,QAAKkF,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAEhDnF,KAAA,QAAKkF,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACrDnF,KAAA,OAAIkF,SAAS,CAAC,qCAAqC,CAAAC,QAAA,EAChDxE,YAAY,CAACU,WAAW,CAAC,CAAC,CAAC,QAAC,CAACV,YAAY,CAACW,QAAQ,CAAC,CAAC,CAAG,CAAC,CAAC,QAC5D,EAAI,CAAC,cACLtB,KAAA,QAAKkF,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BrF,IAAA,WACEsF,OAAO,CAAEnB,aAAc,CACvBiB,SAAS,CAAC,+DAA+D,CAAAC,QAAA,CAC1E,qBAED,CAAQ,CAAC,cACTrF,IAAA,WACEsF,OAAO,CAAEjB,SAAU,CACnBe,SAAS,CAAC,+DAA+D,CAAAC,QAAA,CAC1E,qBAED,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,cAGNrF,IAAA,QAAKoF,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CACzCF,QAAQ,CAACI,GAAG,CAACC,GAAG,eACfxF,IAAA,QAAeoF,SAAS,CAAC,oDAAoD,CAAAC,QAAA,CAC1EG,GAAG,EADIA,GAEL,CACN,CAAC,CACC,CAAC,cAGNxF,IAAA,QAAKoF,SAAS,CAAC,wBAAwB,CAAAC,QAAA,CACpCJ,YAAY,CAACM,GAAG,CAAC,CAACC,GAAG,CAAEC,KAAK,gBAC3BzF,IAAA,CAAC0F,WAAW,EAEVF,GAAG,CAAEA,GAAI,CACTG,QAAQ,CAAErB,UAAW,CACrBsB,UAAU,CAAEjF,YAAY,EAAIK,UAAU,CAACL,YAAY,CAAC,GAAKK,UAAU,CAACwE,GAAG,CAACvE,IAAI,CAAE,EAHzEwE,KAIN,CACF,CAAC,CACC,CAAC,EACH,CAAC,CACH,CAAC,cAGNvF,KAAA,QAAKkF,SAAS,CAAC,WAAW,CAAAC,QAAA,eAExBnF,KAAA,QAAKkF,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChDrF,IAAA,OAAIoF,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CAAC,0BAAI,CAAI,CAAC,cAClEnF,KAAA,QAAKkF,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBnF,KAAA,QAAKkF,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BnF,KAAA,QAAKkF,SAAS,CAAC,uCAAuC,CAAAC,QAAA,EACnDH,UAAU,CAAClB,cAAc,CAAC,GAC7B,EAAK,CAAC,cACNhE,IAAA,QAAKoF,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,oBAAG,CAAK,CAAC,EAC7C,CAAC,cAENnF,KAAA,QAAKkF,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCnF,KAAA,QAAKkF,SAAS,CAAC,sBAAsB,CAAAC,QAAA,eACnCrF,IAAA,SAAMoF,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,0BAAI,CAAM,CAAC,cAC3CrF,IAAA,SAAMoF,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAEH,UAAU,CAACR,KAAK,CAAO,CAAC,EACtD,CAAC,cACNxE,KAAA,QAAKkF,SAAS,CAAC,sBAAsB,CAAAC,QAAA,eACnCrF,IAAA,SAAMoF,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,oBAAG,CAAM,CAAC,cAC1CrF,IAAA,SAAMoF,SAAS,CAAC,8BAA8B,CAAAC,QAAA,CAAEH,UAAU,CAACxB,SAAS,CAAO,CAAC,EACzE,CAAC,cACNxD,KAAA,QAAKkF,SAAS,CAAC,sBAAsB,CAAAC,QAAA,eACnCrF,IAAA,SAAMoF,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,oBAAG,CAAM,CAAC,cAC1CrF,IAAA,SAAMoF,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CACzCH,UAAU,CAACR,KAAK,CAAGQ,UAAU,CAACxB,SAAS,CACpC,CAAC,EACJ,CAAC,cACNxD,KAAA,QAAKkF,SAAS,CAAC,sBAAsB,CAAAC,QAAA,eACnCrF,IAAA,SAAMoF,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,0BAAI,CAAM,CAAC,cAC3CnF,KAAA,SAAMkF,SAAS,CAAC,eAAe,CAAAC,QAAA,EAAEH,UAAU,CAACP,cAAc,CAAC,GAAC,EAAM,CAAC,EAChE,CAAC,EACH,CAAC,EACH,CAAC,EACH,CAAC,CAGLhE,YAAY,eACXT,KAAA,QAAKkF,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChDnF,KAAA,OAAIkF,SAAS,CAAC,0CAA0C,CAAAC,QAAA,EACrD1E,YAAY,CAACa,QAAQ,CAAC,CAAC,CAAG,CAAC,CAAC,QAAC,CAACb,YAAY,CAACwC,OAAO,CAAC,CAAC,CAAC,oBACxD,EAAI,CAAC,CAEJX,eAAe,CAAC7B,YAAY,CAAC,CAACgD,MAAM,GAAK,CAAC,cACzC3D,IAAA,MAAGoF,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,gCAAK,CAAG,CAAC,cAE9CrF,IAAA,QAAKoF,SAAS,CAAC,WAAW,CAAAC,QAAA,CACvB7C,eAAe,CAAC7B,YAAY,CAAC,CAAC4E,GAAG,CAACnD,IAAI,eACrClC,KAAA,QAEEkF,SAAS,CAAE,sBACThD,IAAI,CAACsB,SAAS,CACV,8BAA8B,CAC9B,4BAA4B,EAC/B,CAAA2B,QAAA,eAEHnF,KAAA,QAAKkF,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1CrF,IAAA,QAAKoF,SAAS,CAAE,wBACdhD,IAAI,CAACsB,SAAS,CAAG,cAAc,CAAG,aAAa,EAC9C,CAAE,CAAC,cACN1D,IAAA,SAAMoF,SAAS,CAAE,uBACfhD,IAAI,CAACsB,SAAS,CAAG,gBAAgB,CAAG,eAAe,EAClD,CAAA2B,QAAA,CACAjD,IAAI,CAACyD,KAAK,EAAI,MAAM,CACjB,CAAC,EACJ,CAAC,CACLzD,IAAI,CAAC0C,QAAQ,GAAK1C,IAAI,CAAC0C,QAAQ,CAACC,IAAI,CAAG,CAAC,EAAI3C,IAAI,CAAC0C,QAAQ,CAACE,MAAM,CAAG,CAAC,CAAC,eACpE9E,KAAA,QAAKkF,SAAS,CAAC,iCAAiC,CAAAC,QAAA,EAAC,gBAC3C,CAACjD,IAAI,CAAC0C,QAAQ,CAACC,IAAI,CAAC,QAAC,CAAC3C,IAAI,CAAC0C,QAAQ,CAACE,MAAM,CAAC,QACjD,EAAK,CACN,GArBI5C,IAAI,CAAC0D,EAsBP,CACN,CAAC,CACC,CACN,EACE,CACN,cAGD5F,KAAA,QAAKkF,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChDrF,IAAA,OAAIoF,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CAAC,0BAAI,CAAI,CAAC,cAClEnF,KAAA,QAAKkF,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCnF,KAAA,QAAKkF,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1CrF,IAAA,QAAKoF,SAAS,CAAC,sDAAsD,CAAM,CAAC,cAC5EpF,IAAA,SAAAqF,QAAA,CAAM,sCAAM,CAAM,CAAC,EAChB,CAAC,cACNnF,KAAA,QAAKkF,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1CrF,IAAA,QAAKoF,SAAS,CAAC,wDAAwD,CAAM,CAAC,cAC9EpF,IAAA,SAAAqF,QAAA,CAAM,sCAAM,CAAM,CAAC,EAChB,CAAC,cACNnF,KAAA,QAAKkF,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1CrF,IAAA,QAAKoF,SAAS,CAAC,kDAAkD,CAAM,CAAC,cACxEpF,IAAA,SAAAqF,QAAA,CAAM,gCAAK,CAAM,CAAC,EACf,CAAC,cACNnF,KAAA,QAAKkF,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1CrF,IAAA,QAAKoF,SAAS,CAAC,uDAAuD,CAAM,CAAC,cAC7EpF,IAAA,SAAAqF,QAAA,CAAM,iCAAM,CAAM,CAAC,EAChB,CAAC,cACNnF,KAAA,QAAKkF,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1CrF,IAAA,QAAKoF,SAAS,CAAC,mDAAmD,CAAM,CAAC,cACzEpF,IAAA,SAAAqF,QAAA,CAAM,iCAAM,CAAM,CAAC,EAChB,CAAC,cACNnF,KAAA,QAAKkF,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1CrF,IAAA,QAAKoF,SAAS,CAAC,mDAAmD,CAAM,CAAC,cACzEpF,IAAA,SAAAqF,QAAA,CAAM,gCAAK,CAAM,CAAC,EACf,CAAC,EACH,CAAC,EACH,CAAC,cAGNnF,KAAA,QAAKkF,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChDrF,IAAA,OAAIoF,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CAAC,0BAAI,CAAI,CAAC,cAClEnF,KAAA,QAAKkF,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBrF,IAAA,WACEsF,OAAO,CAAEA,CAAA,GAAM,CACbxE,eAAe,CAAC,GAAI,CAAAC,IAAI,CAACX,UAAU,CAAC,CAAC,CACrCQ,eAAe,CAACR,UAAU,CAAC,CAC7B,CAAE,CACFgF,SAAS,CAAC,uFAAuF,CAAAC,QAAA,CAClG,0BAED,CAAQ,CAAC,cACTrF,IAAA,WACEsF,OAAO,CAAEA,CAAA,GAAMxE,eAAe,CAAC,GAAI,CAAAC,IAAI,CAAC,CAAC,CAAE,CAC3CqE,SAAS,CAAC,uFAAuF,CAAAC,QAAA,CAClG,0BAED,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,EACH,CAAC,EACH,CAAC,EACH,CAAC,CAEV,CAAC,CAED;AACA,KAAM,CAAAK,WAAW,CAAGK,IAAA,EAAmC,IAAlC,CAAEP,GAAG,CAAEG,QAAQ,CAAEC,UAAW,CAAC,CAAAG,IAAA,CAChD;AACA,KAAM,CAAAC,YAAY,CAAGR,GAAG,CAACnF,KAAK,CAAC4F,IAAI,CAAC7D,IAAI,EAAIA,IAAI,CAAC8D,IAAI,GAAK,OAAO,CAAC,CAClE,KAAM,CAAAC,WAAW,CAAGX,GAAG,CAACnF,KAAK,CAAC4F,IAAI,CAAC7D,IAAI,EAAIA,IAAI,CAAC8D,IAAI,GAAK,IAAI,CAAC,CAE9D,KAAM,CAAAE,kBAAkB,CAAGA,CAAA,GAAM,CAC/B,GAAIJ,YAAY,CAAE,MAAO,cAAc,CAAE;AACzC,GAAIG,WAAW,CAAE,MAAO,YAAY,CAAE;AACtC,GAAIX,GAAG,CAAC5B,UAAU,GAAK,CAAC,CAAE,MAAO,YAAY,CAC7C,GAAI4B,GAAG,CAACxB,cAAc,GAAK,GAAG,CAAE,MAAO,cAAc,CACrD,GAAIwB,GAAG,CAACxB,cAAc,EAAI,EAAE,CAAE,MAAO,eAAe,CACpD,MAAO,YAAY,CACrB,CAAC,CAED,KAAM,CAAAqC,cAAc,CAAGA,CAAA,GAAM,CAC3B,GAAIT,UAAU,CAAE,MAAO,0BAA0B,CACjD,GAAIJ,GAAG,CAACzB,OAAO,CAAE,MAAO,0BAA0B,CAClD,GAAIiC,YAAY,CAAE,MAAO,mBAAmB,CAC5C,GAAIG,WAAW,CAAE,MAAO,iBAAiB,CACzC,MAAO,iBAAiB,CAC1B,CAAC,CAED,KAAM,CAAAG,aAAa,CAAGA,CAAA,GAAM,CAC1B,GAAIN,YAAY,CAAE,MAAO,IAAI,CAAE;AAC/B,GAAIG,WAAW,CAAE,MAAO,IAAI,CAAE;AAC9B,MAAO,KAAI,CACb,CAAC,CAED,mBACEjG,KAAA,QACEoF,OAAO,CAAEA,CAAA,GAAMK,QAAQ,CAACH,GAAG,CAACvE,IAAI,CAAE,CAClCmE,SAAS,CAAE;AACjB;AACA,UAAUiB,cAAc,CAAC,CAAC;AAC1B,UAAUD,kBAAkB,CAAC,CAAC;AAC9B,UAAU,CAACZ,GAAG,CAAC1B,cAAc,CAAG,YAAY,CAAG,EAAE;AACjD,OAAQ,CAAAuB,QAAA,eAEFnF,KAAA,QAAKkF,SAAS,CAAC,yCAAyC,CAAAC,QAAA,eACtDnF,KAAA,QAAKkF,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1CrF,IAAA,SAAMoF,SAAS,CAAE,uBACfI,GAAG,CAACzB,OAAO,CAAG,eAAe,CAC7ByB,GAAG,CAAC1B,cAAc,CAAG,eAAe,CAAG,eAAe,EACrD,CAAAuB,QAAA,CACAG,GAAG,CAAC3B,SAAS,CACV,CAAC,CACNyC,aAAa,CAAC,CAAC,eACdtG,IAAA,SAAMoF,SAAS,CAAC,SAAS,CAAAC,QAAA,CAAEiB,aAAa,CAAC,CAAC,CAAO,CAClD,EACE,CAAC,CAEJd,GAAG,CAAC5B,UAAU,CAAG,CAAC,EAAI,CAACoC,YAAY,EAAI,CAACG,WAAW,eACnDjG,KAAA,QAAKkF,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBnF,KAAA,QAAKkF,SAAS,CAAC,uBAAuB,CAAAC,QAAA,EACnCG,GAAG,CAAC/B,cAAc,CAAC,GAAC,CAAC+B,GAAG,CAAC5B,UAAU,EACjC,CAAC,CACL4B,GAAG,CAACxB,cAAc,CAAG,CAAC,eACrB9D,KAAA,QAAKkF,SAAS,CAAE,yBACdI,GAAG,CAACxB,cAAc,GAAK,GAAG,CAAG,gBAAgB,CAC7CwB,GAAG,CAACxB,cAAc,EAAI,EAAE,CAAG,iBAAiB,CAAG,cAAc,EAC5D,CAAAqB,QAAA,EACAG,GAAG,CAACxB,cAAc,CAAC,GACtB,EAAK,CACN,EACE,CACN,CAGAgC,YAAY,eACXhG,IAAA,QAAKoF,SAAS,CAAC,YAAY,CAAAC,QAAA,cACzBrF,IAAA,QAAKoF,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CAAC,oBAAG,CAAK,CAAC,CAC7D,CACN,CAEAc,WAAW,EAAI,CAACH,YAAY,eAC3BhG,IAAA,QAAKoF,SAAS,CAAC,YAAY,CAAAC,QAAA,cACzBrF,IAAA,QAAKoF,SAAS,CAAC,qCAAqC,CAAAC,QAAA,CAAC,oBAAG,CAAK,CAAC,CAC3D,CACN,EACE,CAAC,CAGLG,GAAG,CAAC5B,UAAU,CAAG,CAAC,eACjB5D,IAAA,QAAKoF,SAAS,CAAC,kCAAkC,CAAAC,QAAA,cAC/CnF,KAAA,QAAKkF,SAAS,CAAC,gBAAgB,CAAAC,QAAA,EAC5B1C,KAAK,CAAC4D,IAAI,CAAC,CAAE5C,MAAM,CAAEM,IAAI,CAACuC,GAAG,CAAChB,GAAG,CAAC5B,UAAU,CAAE,CAAC,CAAE,CAAC,CAAC,CAAC2B,GAAG,CAAC,CAACkB,CAAC,CAAEhB,KAAK,gBAChEzF,IAAA,QAEEoF,SAAS,CAAE,sBACTK,KAAK,CAAGD,GAAG,CAAC/B,cAAc,CAAG,cAAc,CAAG,aAAa,EAC1D,EAHEgC,KAIN,CACF,CAAC,CACDD,GAAG,CAAC5B,UAAU,CAAG,CAAC,eACjB5D,IAAA,SAAMoF,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,GAAC,CAAM,CAChD,EACE,CAAC,CACH,CACN,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAAlF,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}