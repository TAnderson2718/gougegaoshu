{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useApp}from'../contexts/AppContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const{login,loading,error}=useApp();const[formData,setFormData]=useState({studentId:'',password:'',rememberMe:false});const[loginError,setLoginError]=useState('');// 加载保存的登录信息\nuseEffect(()=>{try{const savedCredentials=localStorage.getItem('savedCredentials');if(savedCredentials){const{studentId,password}=JSON.parse(savedCredentials);setFormData(prev=>({...prev,studentId,password,rememberMe:true}));}}catch(error){console.error('加载保存的登录信息失败:',error);}},[]);const handleChange=e=>{const{name,value,type,checked}=e.target;setFormData(prev=>({...prev,[name]:type==='checkbox'?checked:value}));};const handleSubmit=async e=>{e.preventDefault();setLoginError('');if(!formData.studentId.trim()||!formData.password.trim()){setLoginError('请输入学生ID和密码');return;}const result=await login(formData.studentId.toUpperCase().trim(),formData.password,formData.rememberMe);if(!result.success){setLoginError(result.message);}};// 快速登录功能\nconst handleQuickLogin=async(studentId,password)=>{setLoginError('');const result=await login(studentId,password,false);if(!result.success){setLoginError(result.message);}};return/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col items-center justify-center h-full p-8 bg-gray-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-md\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-8\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://i.postimg.cc/pdmk3gkb/e9398b353525a8d77a431307d7e0cd1a.png\",alt:\"Logo\",className:\"w-16 h-16 mx-auto mb-4 object-contain\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-800\",children:\"\\u5B66\\u751F\\u767B\\u5F55\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"studentId\",placeholder:\"\\u5B66\\u751FID (\\u4F8B\\u5982: ST001)\",value:formData.studentId,onChange:handleChange,className:\"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500\",disabled:loading})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"\\u5BC6\\u7801\",value:formData.password,onChange:handleChange,className:\"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500\",disabled:loading})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"remember-me\",name:\"rememberMe\",type:\"checkbox\",checked:formData.rememberMe,onChange:handleChange,className:\"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\",disabled:loading}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"remember-me\",className:\"ml-2 block text-sm text-gray-900\",children:\"\\u8BB0\\u4F4F\\u5BC6\\u7801\"})]}),(loginError||error)&&/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-red-100 border border-red-400 text-red-700 rounded-md text-sm\",children:loginError||error}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"w-full bg-blue-600 text-white p-3 rounded-md font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed\",children:loading?'登录中...':'登录'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 text-center text-sm text-gray-500\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u521D\\u59CB\\u5BC6\\u7801: Hello888\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-md\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-yellow-800 mb-3 font-medium\",children:\"\\uD83E\\uDDEA \\u6D4B\\u8BD5\\u5FEB\\u901F\\u767B\\u5F55\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleQuickLogin('ST001','Hello888'),disabled:loading,className:\"w-full bg-green-500 text-white p-2 rounded text-sm hover:bg-green-600 disabled:opacity-50\",children:\"\\u5B66\\u751FST001 (\\u521D\\u59CB\\u5BC6\\u7801)\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleQuickLogin('ST002','Hello888'),disabled:loading,className:\"w-full bg-green-500 text-white p-2 rounded text-sm hover:bg-green-600 disabled:opacity-50\",children:\"\\u5B66\\u751FST002 (\\u521D\\u59CB\\u5BC6\\u7801)\"})]})]})]})});};export default Login;","map":{"version":3,"names":["React","useState","useEffect","useApp","jsx","_jsx","jsxs","_jsxs","Login","login","loading","error","formData","setFormData","studentId","password","rememberMe","loginError","setLoginError","savedCredentials","localStorage","getItem","JSON","parse","prev","console","handleChange","e","name","value","type","checked","target","handleSubmit","preventDefault","trim","result","toUpperCase","success","message","handleQuickLogin","className","children","src","alt","onSubmit","placeholder","onChange","disabled","id","htmlFor","onClick"],"sources":["/Users/danieldong/Documents/GitHub/gougegaoshu/frontend/src/components/Login.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useApp } from '../contexts/AppContext';\n\nconst Login = () => {\n  const { login, loading, error } = useApp();\n  const [formData, setFormData] = useState({\n    studentId: '',\n    password: '',\n    rememberMe: false\n  });\n  const [loginError, setLoginError] = useState('');\n\n  // 加载保存的登录信息\n  useEffect(() => {\n    try {\n      const savedCredentials = localStorage.getItem('savedCredentials');\n      if (savedCredentials) {\n        const { studentId, password } = JSON.parse(savedCredentials);\n        setFormData(prev => ({\n          ...prev,\n          studentId,\n          password,\n          rememberMe: true\n        }));\n      }\n    } catch (error) {\n      console.error('加载保存的登录信息失败:', error);\n    }\n  }, []);\n\n  const handleChange = (e) => {\n    const { name, value, type, checked } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: type === 'checkbox' ? checked : value\n    }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoginError('');\n\n    if (!formData.studentId.trim() || !formData.password.trim()) {\n      setLoginError('请输入学生ID和密码');\n      return;\n    }\n\n    const result = await login(\n      formData.studentId.toUpperCase().trim(), \n      formData.password, \n      formData.rememberMe\n    );\n\n    if (!result.success) {\n      setLoginError(result.message);\n    }\n  };\n\n  // 快速登录功能\n  const handleQuickLogin = async (studentId, password) => {\n    setLoginError('');\n    const result = await login(studentId, password, false);\n    if (!result.success) {\n      setLoginError(result.message);\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col items-center justify-center h-full p-8 bg-gray-100\">\n      <div className=\"w-full max-w-md\">\n        <div className=\"text-center mb-8\">\n          <img \n            src=\"https://i.postimg.cc/pdmk3gkb/e9398b353525a8d77a431307d7e0cd1a.png\" \n            alt=\"Logo\" \n            className=\"w-16 h-16 mx-auto mb-4 object-contain\"\n          />\n          <h1 className=\"text-3xl font-bold text-gray-800\">学生登录</h1>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <input\n              type=\"text\"\n              name=\"studentId\"\n              placeholder=\"学生ID (例如: ST001)\"\n              value={formData.studentId}\n              onChange={handleChange}\n              className=\"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500\"\n              disabled={loading}\n            />\n          </div>\n\n          <div>\n            <input\n              type=\"password\"\n              name=\"password\"\n              placeholder=\"密码\"\n              value={formData.password}\n              onChange={handleChange}\n              className=\"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500\"\n              disabled={loading}\n            />\n          </div>\n\n          <div className=\"flex items-center\">\n            <input\n              id=\"remember-me\"\n              name=\"rememberMe\"\n              type=\"checkbox\"\n              checked={formData.rememberMe}\n              onChange={handleChange}\n              className=\"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\n              disabled={loading}\n            />\n            <label htmlFor=\"remember-me\" className=\"ml-2 block text-sm text-gray-900\">\n              记住密码\n            </label>\n          </div>\n\n          {(loginError || error) && (\n            <div className=\"p-3 bg-red-100 border border-red-400 text-red-700 rounded-md text-sm\">\n              {loginError || error}\n            </div>\n          )}\n\n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"w-full bg-blue-600 text-white p-3 rounded-md font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            {loading ? '登录中...' : '登录'}\n          </button>\n        </form>\n\n        <div className=\"mt-6 text-center text-sm text-gray-500\">\n          <p>初始密码: Hello888</p>\n        </div>\n\n        {/* 快速登录按钮 - 仅用于测试 */}\n        <div className=\"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-md\">\n          <p className=\"text-sm text-yellow-800 mb-3 font-medium\">🧪 测试快速登录</p>\n          <div className=\"space-y-2\">\n            <button\n              onClick={() => handleQuickLogin('ST001', 'Hello888')}\n              disabled={loading}\n              className=\"w-full bg-green-500 text-white p-2 rounded text-sm hover:bg-green-600 disabled:opacity-50\"\n            >\n              学生ST001 (初始密码)\n            </button>\n            <button\n              onClick={() => handleQuickLogin('ST002', 'Hello888')}\n              disabled={loading}\n              className=\"w-full bg-green-500 text-white p-2 rounded text-sm hover:bg-green-600 disabled:opacity-50\"\n            >\n              学生ST002 (初始密码)\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}