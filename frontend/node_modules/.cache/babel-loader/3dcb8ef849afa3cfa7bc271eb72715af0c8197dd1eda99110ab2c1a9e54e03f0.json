{"ast":null,"code":"var _jsxFileName = \"/Users/danieldong/Documents/GitHub/gougegaoshu/frontend/src/contexts/AppContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useReducer, useEffect } from 'react';\nimport { authAPI } from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AppContext = /*#__PURE__*/createContext();\n\n// ÂàùÂßãÁä∂ÊÄÅ\nconst initialDate = new Date();\nconst savedSystemDate = localStorage.getItem('systemDate');\nconst currentSystemDate = savedSystemDate ? new Date(savedSystemDate) : new Date(initialDate);\nconst initialState = {\n  user: null,\n  isAuthenticated: false,\n  loading: true,\n  error: null,\n  systemDate: currentSystemDate,\n  initialDate: new Date(initialDate)\n};\n\n// ActionÁ±ªÂûã\nconst actionTypes = {\n  SET_LOADING: 'SET_LOADING',\n  SET_USER: 'SET_USER',\n  SET_ERROR: 'SET_ERROR',\n  LOGOUT: 'LOGOUT',\n  SET_SYSTEM_DATE: 'SET_SYSTEM_DATE'\n};\n\n// Reducer\nfunction appReducer(state, action) {\n  switch (action.type) {\n    case actionTypes.SET_LOADING:\n      return {\n        ...state,\n        loading: action.payload\n      };\n    case actionTypes.SET_USER:\n      return {\n        ...state,\n        user: action.payload,\n        isAuthenticated: !!action.payload,\n        loading: false,\n        error: null\n      };\n    case actionTypes.SET_ERROR:\n      return {\n        ...state,\n        error: action.payload,\n        loading: false\n      };\n    case actionTypes.LOGOUT:\n      return {\n        ...state,\n        user: null,\n        isAuthenticated: false,\n        loading: false\n      };\n    case actionTypes.SET_SYSTEM_DATE:\n      return {\n        ...state,\n        systemDate: action.payload\n      };\n    default:\n      return state;\n  }\n}\n\n// Context Provider\nexport const AppProvider = ({\n  children\n}) => {\n  _s();\n  const [state, dispatch] = useReducer(appReducer, initialState);\n\n  // ÂàùÂßãÂåñÊó∂Ê£ÄÊü•token\n  useEffect(() => {\n    const initAuth = async () => {\n      const token = localStorage.getItem('token');\n      const savedUser = localStorage.getItem('user');\n      if (token && savedUser) {\n        try {\n          // È™åËØÅtokenÊòØÂê¶ÊúâÊïà\n          const response = await authAPI.verify();\n          if (response.success) {\n            dispatch({\n              type: actionTypes.SET_USER,\n              payload: JSON.parse(savedUser)\n            });\n          } else {\n            // tokenÊó†ÊïàÔºåÊ∏ÖÈô§Êú¨Âú∞Â≠òÂÇ®\n            localStorage.removeItem('token');\n            localStorage.removeItem('user');\n            dispatch({\n              type: actionTypes.LOGOUT\n            });\n          }\n        } catch (error) {\n          console.error('TokenÈ™åËØÅÂ§±Ë¥•:', error);\n          localStorage.removeItem('token');\n          localStorage.removeItem('user');\n          dispatch({\n            type: actionTypes.LOGOUT\n          });\n        }\n      } else {\n        dispatch({\n          type: actionTypes.SET_LOADING,\n          payload: false\n        });\n      }\n    };\n    initAuth();\n  }, []);\n\n  // ÁôªÂΩï\n  const login = async (studentId, password, rememberMe = false) => {\n    try {\n      dispatch({\n        type: actionTypes.SET_LOADING,\n        payload: true\n      });\n      dispatch({\n        type: actionTypes.SET_ERROR,\n        payload: null\n      });\n      const response = await authAPI.login(studentId, password);\n      if (response.success) {\n        const {\n          token,\n          student\n        } = response.data;\n\n        // ‰øùÂ≠òÂà∞localStorage\n        localStorage.setItem('token', token);\n        localStorage.setItem('user', JSON.stringify(student));\n        if (rememberMe) {\n          localStorage.setItem('savedCredentials', JSON.stringify({\n            studentId,\n            password\n          }));\n        } else {\n          localStorage.removeItem('savedCredentials');\n        }\n        dispatch({\n          type: actionTypes.SET_USER,\n          payload: student\n        });\n        return {\n          success: true\n        };\n      }\n    } catch (error) {\n      dispatch({\n        type: actionTypes.SET_ERROR,\n        payload: error.message\n      });\n      return {\n        success: false,\n        message: error.message\n      };\n    }\n  };\n\n  // ÁôªÂá∫\n  const logout = () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    dispatch({\n      type: actionTypes.LOGOUT\n    });\n  };\n\n  // Âº∫Âà∂‰øÆÊîπÂØÜÁ†Å\n  const forceChangePassword = async newPassword => {\n    try {\n      const response = await authAPI.forceChangePassword(newPassword);\n      if (response.success) {\n        // Êõ¥Êñ∞Áî®Êà∑Áä∂ÊÄÅ\n        const updatedUser = {\n          ...state.user,\n          forcePasswordChange: false\n        };\n        localStorage.setItem('user', JSON.stringify(updatedUser));\n        dispatch({\n          type: actionTypes.SET_USER,\n          payload: updatedUser\n        });\n        return {\n          success: true\n        };\n      }\n    } catch (error) {\n      return {\n        success: false,\n        message: error.message\n      };\n    }\n  };\n\n  // ‰øÆÊîπÂØÜÁ†Å\n  const changePassword = async (oldPassword, newPassword) => {\n    try {\n      const response = await authAPI.changePassword(oldPassword, newPassword);\n      return response;\n    } catch (error) {\n      return {\n        success: false,\n        message: error.message\n      };\n    }\n  };\n\n  // ËÆæÁΩÆÁ≥ªÁªüÊó•ÊúüÔºàÁî®‰∫éÊ®°ÊãüÔºâ\n  const setSystemDate = date => {\n    localStorage.setItem('systemDate', date.toISOString());\n    dispatch({\n      type: actionTypes.SET_SYSTEM_DATE,\n      payload: date\n    });\n  };\n\n  // ËøõÂÖ•‰∏ã‰∏ÄÂ§©ÔºàÊ®°ÊãüÂäüËÉΩÔºâ\n  const advanceDay = async () => {\n    const currentDate = new Date(state.systemDate);\n    const nextDay = new Date(currentDate);\n    nextDay.setDate(nextDay.getDate() + 1);\n\n    // Âú®ÂàáÊç¢Âà∞‰∏ã‰∏ÄÂ§©‰πãÂâçÔºåÂÖàÂ§ÑÁêÜÂΩìÂ§©ÁöÑÊú™ÂÆåÊàê‰ªªÂä°\n    await processMidnightTasks(currentDate);\n    setSystemDate(nextDay);\n  };\n\n  // ÈáçÁΩÆÂà∞ÂàùÂßãÊó•Êúü\n  const resetToInitialDate = () => {\n    localStorage.removeItem('systemDate');\n    setSystemDate(new Date(state.initialDate));\n  };\n\n  // Ê£ÄÊü•ÊòØÂê¶ÂèØ‰ª•ËÆæÁΩÆÊó•ÊúüÔºàÂè™ËÉΩËÆæÁΩÆ‰ªäÂ§©ÊàñÊú™Êù•ÁöÑÊó•ÊúüÔºâ\n  const canSetDate = targetDate => {\n    const today = new Date(state.initialDate);\n    today.setHours(0, 0, 0, 0);\n    const target = new Date(targetDate);\n    target.setHours(0, 0, 0, 0);\n    return target >= today;\n  };\n\n  // ÂÆâÂÖ®ËÆæÁΩÆÁ≥ªÁªüÊó•ÊúüÔºàÂè™ÂÖÅËÆ∏ËÆæÁΩÆ‰ªäÂ§©ÊàñÊú™Êù•Êó•ÊúüÔºâ\n  const setSystemDateSafely = async date => {\n    if (canSetDate(date)) {\n      const currentDate = new Date(state.systemDate);\n      const targetDate = new Date(date);\n\n      // Â¶ÇÊûúÊòØË∑≥Ë∑ÉÂà∞Êú™Êù•Êó•ÊúüÔºåÈúÄË¶ÅÂ§ÑÁêÜ‰∏≠Èó¥ÊâÄÊúâÊó•ÊúüÁöÑ24:00‰ªªÂä°\n      if (targetDate > currentDate) {\n        let processDate = new Date(currentDate);\n        while (processDate < targetDate) {\n          await processMidnightTasks(processDate);\n          processDate.setDate(processDate.getDate() + 1);\n        }\n      }\n      setSystemDate(date);\n      return true;\n    }\n    return false;\n  };\n\n  // Â§ÑÁêÜ24:00‰ªªÂä°ÔºàËá™Âä®Ë∞ÉÁî®Ôºâ\n  const processMidnightTasks = async targetDate => {\n    try {\n      // Âè™ÊúâÂú®Áî®Êà∑Â∑≤ÁôªÂΩïÁöÑÊÉÖÂÜµ‰∏ãÊâçÂ§ÑÁêÜ\n      if (!state.user) {\n        console.log('Áî®Êà∑Êú™ÁôªÂΩïÔºåË∑≥Ëøá24:00‰ªªÂä°Â§ÑÁêÜ');\n        return;\n      }\n      const dateStr = targetDate.toISOString().split('T')[0];\n      console.log(`üïõ Ëá™Âä®Â§ÑÁêÜ ${dateStr} ÁöÑ24:00‰ªªÂä°...`);\n      const token = localStorage.getItem('token');\n      if (!token) {\n        console.warn('Êú™ÊâæÂà∞ËÆ§ËØÅ‰ª§ÁâåÔºåË∑≥Ëøá24:00‰ªªÂä°Â§ÑÁêÜ');\n        return;\n      }\n      const response = await fetch('/api/tasks/midnight-process', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          date: dateStr\n        })\n      });\n      if (response.ok) {\n        const result = await response.json();\n        if (result.success) {\n          console.log(`‚úÖ 24:00‰ªªÂä°Â§ÑÁêÜÂÆåÊàê:`, result.data);\n        } else {\n          console.warn('‚ö†Ô∏è 24:00‰ªªÂä°Â§ÑÁêÜË≠¶Âëä:', result.message);\n        }\n      } else {\n        const errorText = await response.text();\n        console.error(`‚ùå 24:00‰ªªÂä°Â§ÑÁêÜHTTPÈîôËØØ ${response.status}:`, errorText);\n      }\n    } catch (error) {\n      console.error('‚ùå Ëá™Âä®24:00Â§ÑÁêÜÂ§±Ë¥•:', error);\n      // ‰∏çÊäõÂá∫ÈîôËØØÔºåÈÅøÂÖçÂΩ±ÂìçÊó•ÊúüÂàáÊç¢\n    }\n  };\n  const value = {\n    ...state,\n    login,\n    logout,\n    forceChangePassword,\n    changePassword,\n    setSystemDate,\n    setSystemDateSafely,\n    advanceDay,\n    resetToInitialDate,\n    canSetDate\n  };\n  return /*#__PURE__*/_jsxDEV(AppContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 282,\n    columnNumber: 5\n  }, this);\n};\n\n// Hook for using context\n_s(AppProvider, \"bgCdjuTOmPdSBRwTap80EFd9Y3U=\");\n_c = AppProvider;\nexport const useApp = () => {\n  _s2();\n  const context = useContext(AppContext);\n  if (!context) {\n    throw new Error('useApp must be used within an AppProvider');\n  }\n  return context;\n};\n_s2(useApp, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport default AppContext;\nvar _c;\n$RefreshReg$(_c, \"AppProvider\");","map":{"version":3,"names":["React","createContext","useContext","useReducer","useEffect","authAPI","jsxDEV","_jsxDEV","AppContext","initialDate","Date","savedSystemDate","localStorage","getItem","currentSystemDate","initialState","user","isAuthenticated","loading","error","systemDate","actionTypes","SET_LOADING","SET_USER","SET_ERROR","LOGOUT","SET_SYSTEM_DATE","appReducer","state","action","type","payload","AppProvider","children","_s","dispatch","initAuth","token","savedUser","response","verify","success","JSON","parse","removeItem","console","login","studentId","password","rememberMe","student","data","setItem","stringify","message","logout","forceChangePassword","newPassword","updatedUser","forcePasswordChange","changePassword","oldPassword","setSystemDate","date","toISOString","advanceDay","currentDate","nextDay","setDate","getDate","processMidnightTasks","resetToInitialDate","canSetDate","targetDate","today","setHours","target","setSystemDateSafely","processDate","log","dateStr","split","warn","fetch","method","headers","body","ok","result","json","errorText","text","status","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","useApp","_s2","context","Error","$RefreshReg$"],"sources":["/Users/danieldong/Documents/GitHub/gougegaoshu/frontend/src/contexts/AppContext.js"],"sourcesContent":["import React, { createContext, useContext, useReducer, useEffect } from 'react';\nimport { authAPI } from '../services/api';\n\nconst AppContext = createContext();\n\n// ÂàùÂßãÁä∂ÊÄÅ\nconst initialDate = new Date();\nconst savedSystemDate = localStorage.getItem('systemDate');\nconst currentSystemDate = savedSystemDate ? new Date(savedSystemDate) : new Date(initialDate);\n\nconst initialState = {\n  user: null,\n  isAuthenticated: false,\n  loading: true,\n  error: null,\n  systemDate: currentSystemDate,\n  initialDate: new Date(initialDate)\n};\n\n// ActionÁ±ªÂûã\nconst actionTypes = {\n  SET_LOADING: 'SET_LOADING',\n  SET_USER: 'SET_USER',\n  SET_ERROR: 'SET_ERROR',\n  LOGOUT: 'LOGOUT',\n  SET_SYSTEM_DATE: 'SET_SYSTEM_DATE'\n};\n\n// Reducer\nfunction appReducer(state, action) {\n  switch (action.type) {\n    case actionTypes.SET_LOADING:\n      return { ...state, loading: action.payload };\n    \n    case actionTypes.SET_USER:\n      return { \n        ...state, \n        user: action.payload, \n        isAuthenticated: !!action.payload,\n        loading: false,\n        error: null\n      };\n    \n    case actionTypes.SET_ERROR:\n      return { ...state, error: action.payload, loading: false };\n    \n    case actionTypes.LOGOUT:\n      return { \n        ...state, \n        user: null, \n        isAuthenticated: false, \n        loading: false \n      };\n    \n    case actionTypes.SET_SYSTEM_DATE:\n      return { ...state, systemDate: action.payload };\n    \n    default:\n      return state;\n  }\n}\n\n// Context Provider\nexport const AppProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(appReducer, initialState);\n\n  // ÂàùÂßãÂåñÊó∂Ê£ÄÊü•token\n  useEffect(() => {\n    const initAuth = async () => {\n      const token = localStorage.getItem('token');\n      const savedUser = localStorage.getItem('user');\n      \n      if (token && savedUser) {\n        try {\n          // È™åËØÅtokenÊòØÂê¶ÊúâÊïà\n          const response = await authAPI.verify();\n          if (response.success) {\n            dispatch({ \n              type: actionTypes.SET_USER, \n              payload: JSON.parse(savedUser) \n            });\n          } else {\n            // tokenÊó†ÊïàÔºåÊ∏ÖÈô§Êú¨Âú∞Â≠òÂÇ®\n            localStorage.removeItem('token');\n            localStorage.removeItem('user');\n            dispatch({ type: actionTypes.LOGOUT });\n          }\n        } catch (error) {\n          console.error('TokenÈ™åËØÅÂ§±Ë¥•:', error);\n          localStorage.removeItem('token');\n          localStorage.removeItem('user');\n          dispatch({ type: actionTypes.LOGOUT });\n        }\n      } else {\n        dispatch({ type: actionTypes.SET_LOADING, payload: false });\n      }\n    };\n\n    initAuth();\n  }, []);\n\n  // ÁôªÂΩï\n  const login = async (studentId, password, rememberMe = false) => {\n    try {\n      dispatch({ type: actionTypes.SET_LOADING, payload: true });\n      dispatch({ type: actionTypes.SET_ERROR, payload: null });\n\n      const response = await authAPI.login(studentId, password);\n      \n      if (response.success) {\n        const { token, student } = response.data;\n        \n        // ‰øùÂ≠òÂà∞localStorage\n        localStorage.setItem('token', token);\n        localStorage.setItem('user', JSON.stringify(student));\n        \n        if (rememberMe) {\n          localStorage.setItem('savedCredentials', JSON.stringify({ \n            studentId, \n            password \n          }));\n        } else {\n          localStorage.removeItem('savedCredentials');\n        }\n\n        dispatch({ type: actionTypes.SET_USER, payload: student });\n        return { success: true };\n      }\n    } catch (error) {\n      dispatch({ type: actionTypes.SET_ERROR, payload: error.message });\n      return { success: false, message: error.message };\n    }\n  };\n\n  // ÁôªÂá∫\n  const logout = () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    dispatch({ type: actionTypes.LOGOUT });\n  };\n\n  // Âº∫Âà∂‰øÆÊîπÂØÜÁ†Å\n  const forceChangePassword = async (newPassword) => {\n    try {\n      const response = await authAPI.forceChangePassword(newPassword);\n      if (response.success) {\n        // Êõ¥Êñ∞Áî®Êà∑Áä∂ÊÄÅ\n        const updatedUser = { ...state.user, forcePasswordChange: false };\n        localStorage.setItem('user', JSON.stringify(updatedUser));\n        dispatch({ type: actionTypes.SET_USER, payload: updatedUser });\n        return { success: true };\n      }\n    } catch (error) {\n      return { success: false, message: error.message };\n    }\n  };\n\n  // ‰øÆÊîπÂØÜÁ†Å\n  const changePassword = async (oldPassword, newPassword) => {\n    try {\n      const response = await authAPI.changePassword(oldPassword, newPassword);\n      return response;\n    } catch (error) {\n      return { success: false, message: error.message };\n    }\n  };\n\n  // ËÆæÁΩÆÁ≥ªÁªüÊó•ÊúüÔºàÁî®‰∫éÊ®°ÊãüÔºâ\n  const setSystemDate = (date) => {\n    localStorage.setItem('systemDate', date.toISOString());\n    dispatch({ type: actionTypes.SET_SYSTEM_DATE, payload: date });\n  };\n\n  // ËøõÂÖ•‰∏ã‰∏ÄÂ§©ÔºàÊ®°ÊãüÂäüËÉΩÔºâ\n  const advanceDay = async () => {\n    const currentDate = new Date(state.systemDate);\n    const nextDay = new Date(currentDate);\n    nextDay.setDate(nextDay.getDate() + 1);\n    \n    // Âú®ÂàáÊç¢Âà∞‰∏ã‰∏ÄÂ§©‰πãÂâçÔºåÂÖàÂ§ÑÁêÜÂΩìÂ§©ÁöÑÊú™ÂÆåÊàê‰ªªÂä°\n    await processMidnightTasks(currentDate);\n    \n    setSystemDate(nextDay);\n  };\n\n  // ÈáçÁΩÆÂà∞ÂàùÂßãÊó•Êúü\n  const resetToInitialDate = () => {\n    localStorage.removeItem('systemDate');\n    setSystemDate(new Date(state.initialDate));\n  };\n\n  // Ê£ÄÊü•ÊòØÂê¶ÂèØ‰ª•ËÆæÁΩÆÊó•ÊúüÔºàÂè™ËÉΩËÆæÁΩÆ‰ªäÂ§©ÊàñÊú™Êù•ÁöÑÊó•ÊúüÔºâ\n  const canSetDate = (targetDate) => {\n    const today = new Date(state.initialDate);\n    today.setHours(0, 0, 0, 0);\n    const target = new Date(targetDate);\n    target.setHours(0, 0, 0, 0);\n    return target >= today;\n  };\n\n  // ÂÆâÂÖ®ËÆæÁΩÆÁ≥ªÁªüÊó•ÊúüÔºàÂè™ÂÖÅËÆ∏ËÆæÁΩÆ‰ªäÂ§©ÊàñÊú™Êù•Êó•ÊúüÔºâ\n  const setSystemDateSafely = async (date) => {\n    if (canSetDate(date)) {\n      const currentDate = new Date(state.systemDate);\n      const targetDate = new Date(date);\n      \n      // Â¶ÇÊûúÊòØË∑≥Ë∑ÉÂà∞Êú™Êù•Êó•ÊúüÔºåÈúÄË¶ÅÂ§ÑÁêÜ‰∏≠Èó¥ÊâÄÊúâÊó•ÊúüÁöÑ24:00‰ªªÂä°\n      if (targetDate > currentDate) {\n        let processDate = new Date(currentDate);\n        while (processDate < targetDate) {\n          await processMidnightTasks(processDate);\n          processDate.setDate(processDate.getDate() + 1);\n        }\n      }\n      \n      setSystemDate(date);\n      return true;\n    }\n    return false;\n  };\n\n  // Â§ÑÁêÜ24:00‰ªªÂä°ÔºàËá™Âä®Ë∞ÉÁî®Ôºâ\n  const processMidnightTasks = async (targetDate) => {\n    try {\n      // Âè™ÊúâÂú®Áî®Êà∑Â∑≤ÁôªÂΩïÁöÑÊÉÖÂÜµ‰∏ãÊâçÂ§ÑÁêÜ\n      if (!state.user) {\n        console.log('Áî®Êà∑Êú™ÁôªÂΩïÔºåË∑≥Ëøá24:00‰ªªÂä°Â§ÑÁêÜ');\n        return;\n      }\n\n      const dateStr = targetDate.toISOString().split('T')[0];\n      console.log(`üïõ Ëá™Âä®Â§ÑÁêÜ ${dateStr} ÁöÑ24:00‰ªªÂä°...`);\n\n      const token = localStorage.getItem('token');\n      if (!token) {\n        console.warn('Êú™ÊâæÂà∞ËÆ§ËØÅ‰ª§ÁâåÔºåË∑≥Ëøá24:00‰ªªÂä°Â§ÑÁêÜ');\n        return;\n      }\n\n      const response = await fetch('/api/tasks/midnight-process', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          date: dateStr\n        })\n      });\n\n      if (response.ok) {\n        const result = await response.json();\n        if (result.success) {\n          console.log(`‚úÖ 24:00‰ªªÂä°Â§ÑÁêÜÂÆåÊàê:`, result.data);\n        } else {\n          console.warn('‚ö†Ô∏è 24:00‰ªªÂä°Â§ÑÁêÜË≠¶Âëä:', result.message);\n        }\n      } else {\n        const errorText = await response.text();\n        console.error(`‚ùå 24:00‰ªªÂä°Â§ÑÁêÜHTTPÈîôËØØ ${response.status}:`, errorText);\n      }\n    } catch (error) {\n      console.error('‚ùå Ëá™Âä®24:00Â§ÑÁêÜÂ§±Ë¥•:', error);\n      // ‰∏çÊäõÂá∫ÈîôËØØÔºåÈÅøÂÖçÂΩ±ÂìçÊó•ÊúüÂàáÊç¢\n    }\n  };\n\n  const value = {\n    ...state,\n    login,\n    logout,\n    forceChangePassword,\n    changePassword,\n    setSystemDate,\n    setSystemDateSafely,\n    advanceDay,\n    resetToInitialDate,\n    canSetDate\n  };\n\n  return (\n    <AppContext.Provider value={value}>\n      {children}\n    </AppContext.Provider>\n  );\n};\n\n// Hook for using context\nexport const useApp = () => {\n  const context = useContext(AppContext);\n  if (!context) {\n    throw new Error('useApp must be used within an AppProvider');\n  }\n  return context;\n};\n\nexport default AppContext;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}