{"ast":null,"code":"import React,{useState,useEffect}from'react';import{adminAPI}from'../services/api';import{useApp}from'../contexts/AppContext';import{performAdminReset,syncPasswordReset}from'../utils/dataConsistency';import*as XLSX from'xlsx';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AdminDashboard=()=>{const{user,logout}=useApp();const[students,setStudents]=useState([]);const[selectedStudent,setSelectedStudent]=useState(null);const[studentProfile,setStudentProfile]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[showCreateForm,setShowCreateForm]=useState(false);const[newStudentName,setNewStudentName]=useState('');const[showExcelImportForm,setShowExcelImportForm]=useState(false);const[excelFile,setExcelFile]=useState(null);const[excelData,setExcelData]=useState([]);const[taskReport,setTaskReport]=useState(null);const[reportDate,setReportDate]=useState(new Date().toISOString().split('T')[0]);const[testMode,setTestMode]=useState(false);const[showTaskForm,setShowTaskForm]=useState(false);const[newTask,setNewTask]=useState({studentId:'',title:'',date:new Date().toISOString().split('T')[0],type:'学习'});// 获取学生列表\nconst fetchStudents=async()=>{try{setLoading(true);setError(null);const response=await adminAPI.getStudents();if(response.success){setStudents(response.data||[]);}else{setError(response.message||'获取学生列表失败');}}catch(err){setError(err.message||'网络错误');}finally{setLoading(false);}};// 获取学生档案\nconst fetchStudentProfile=async studentId=>{try{const response=await adminAPI.getStudentProfile(studentId);if(response.success){setStudentProfile(response.data);}else{setError(response.message||'获取学生档案失败');}}catch(err){setError(err.message||'获取学生档案失败');}};// 创建学生\nconst createStudent=async()=>{if(!newStudentName.trim()){setError('请输入学生姓名');return;}try{setError(null);const response=await adminAPI.createStudent(newStudentName);if(response.success){setNewStudentName('');setShowCreateForm(false);await fetchStudents();alert('学生创建成功');}else{setError(response.message||'创建学生失败');}}catch(err){setError(err.message||'创建学生失败');}};// 重置密码\nconst resetPassword=async studentId=>{if(!window.confirm('确定要重置该学生的密码吗？')){return;}try{setError(null);console.log(`🔄 重置学生 ${studentId} 的密码...`);const response=await adminAPI.resetPassword(studentId);if(response.success){console.log('✅ 密码重置成功:',response.data);// 使用数据一致性工具同步状态\nsyncPasswordReset(studentId,setStudents,setSelectedStudent);alert(`✅ 密码重置成功！\\n新密码：${response.data.initialPassword}\\n该学生下次登录时需要修改密码。`);}else{setError(response.message||'重置密码失败');}}catch(err){console.error('❌ 重置密码失败:',err);setError(err.message||'重置密码失败');}};// 创建单个任务\nconst createTask=async()=>{if(!newTask.studentId||!newTask.title.trim()){setError('请选择学生并输入任务标题');return;}try{setError(null);const response=await adminAPI.createTask(newTask);if(response.success){setNewTask({studentId:'',title:'',date:new Date().toISOString().split('T')[0],type:'学习'});setShowTaskForm(false);alert('任务创建成功');}else{setError(response.message||'创建任务失败');}}catch(err){setError(err.message||'创建任务失败');}};// 处理Excel文件上传\nconst handleExcelFileChange=event=>{const file=event.target.files[0];if(!file){return;}// 清空input的值，避免重复选择同一文件时不触发change事件\nevent.target.value='';console.log('选择的文件:',file.name,file.type,file.size);// 验证文件类型\nconst validTypes=['application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',// .xlsx\n'application/vnd.ms-excel'// .xls\n];if(!validTypes.includes(file.type)&&!file.name.match(/\\.(xlsx|xls)$/i)){setError('请选择有效的Excel文件 (.xlsx 或 .xls)');return;}// 验证文件大小 (最大5MB)\nif(file.size>5*1024*1024){setError('文件大小不能超过5MB');return;}setExcelFile(file);setError(null);const reader=new FileReader();reader.onload=e=>{try{console.log('开始解析Excel文件...');const data=new Uint8Array(e.target.result);const workbook=XLSX.read(data,{type:'array'});// 读取第一个工作表\nconst sheetName=workbook.SheetNames[0];const worksheet=workbook.Sheets[sheetName];// 转换为JSON格式\nconst jsonData=XLSX.utils.sheet_to_json(worksheet,{header:1});console.log('解析的原始数据:',jsonData);// 过滤空行并格式化数据\nconst formattedData=jsonData.filter(row=>row.length>0&&row.some(cell=>cell!==undefined&&cell!=='')).map(row=>({studentId:row[0]||'',date:row[1]||'',taskType:row[2]||'',title:row[3]||''}));console.log('格式化后的数据:',formattedData);setExcelData(formattedData);setError(null);}catch(err){console.error('Excel解析错误:',err);setError('Excel文件解析失败: '+err.message);setExcelFile(null);setExcelData([]);}};reader.onerror=err=>{console.error('文件读取错误:',err);setError('文件读取失败，请重试');setExcelFile(null);setExcelData([]);};reader.readAsArrayBuffer(file);};// 下载Excel模板\nconst downloadExcelTemplate=()=>{try{// 创建示例数据 - 从7月19号到7月31号的完整示例\nconst templateData=[['学生ID','日期','任务类型','任务标题'],// 7月19日 - 周六\n['ST001','2025-07-19','数学','高等数学微分学'],['ST001','2025-07-19','英语','考研词汇Unit1-10'],['ST001','2025-07-19','专业课','数据结构与算法基础'],['ST002','2025-07-19','数学','线性代数矩阵运算'],['ST002','2025-07-19','英语','阅读理解专项训练'],['ST002','2025-07-19','专业课','计算机网络TCP/IP'],// 7月20日 - 周日（休息日）\n['ST001','2025-07-20','休息','休息日'],['ST002','2025-07-20','休息','休息日'],// 7月21日 - 周一\n['ST001','2025-07-21','数学','高等数学积分学'],['ST001','2025-07-21','英语','阅读理解专项训练'],['ST001','2025-07-21','专业课','操作系统进程管理'],['ST002','2025-07-21','数学','概率论与数理统计'],['ST002','2025-07-21','英语','完形填空专项训练'],['ST002','2025-07-21','专业课','数据库系统原理'],// 7月22日 - 周二\n['ST001','2025-07-22','数学','线性代数向量空间'],['ST001','2025-07-22','英语','翻译技巧训练'],['ST001','2025-07-22','专业课','计算机组成原理'],['ST002','2025-07-22','数学','高等数学极限理论'],['ST002','2025-07-22','英语','写作模板练习'],['ST002','2025-07-22','专业课','软件工程基础'],// 7月23日 - 周三\n['ST001','2025-07-23','数学','概率论基础概念'],['ST001','2025-07-23','英语','长难句分析'],['ST001','2025-07-23','专业课','算法设计与分析'],['ST002','2025-07-23','数学','线性代数矩阵变换'],['ST002','2025-07-23','英语','词汇记忆强化'],['ST002','2025-07-23','专业课','编译原理基础'],// 7月24日 - 周四\n['ST001','2025-07-24','数学','数理统计假设检验'],['ST001','2025-07-24','英语','新题型解题技巧'],['ST001','2025-07-24','专业课','人工智能导论'],['ST002','2025-07-24','数学','概率分布与期望'],['ST002','2025-07-24','英语','阅读理解提速训练'],['ST002','2025-07-24','专业课','机器学习基础'],// 7月25日 - 周五\n['ST001','2025-07-25','数学','高等数学多元函数'],['ST001','2025-07-25','英语','作文素材积累'],['ST001','2025-07-25','专业课','分布式系统概念'],['ST002','2025-07-25','数学','线性代数特征值'],['ST002','2025-07-25','英语','听力理解训练'],['ST002','2025-07-25','专业课','云计算技术'],// 7月26日 - 周六\n['ST001','2025-07-26','数学','概率论条件概率'],['ST001','2025-07-26','英语','语法综合复习'],['ST001','2025-07-26','专业课','网络安全基础'],['ST002','2025-07-26','数学','数理统计参数估计'],['ST002','2025-07-26','英语','模拟试题练习'],['ST002','2025-07-26','专业课','区块链技术'],// 7月27日 - 周日（休息日）\n['ST001','2025-07-27','休息','休息日'],['ST002','2025-07-27','休息','休息日'],// 7月28日 - 周一\n['ST001','2025-07-28','数学','高等数学重积分'],['ST001','2025-07-28','英语','真题模拟测试'],['ST001','2025-07-28','专业课','图论与离散数学'],['ST002','2025-07-28','数学','线性代数二次型'],['ST002','2025-07-28','英语','错题分析总结'],['ST002','2025-07-28','专业课','数值分析方法'],// 7月29日 - 周二\n['ST001','2025-07-29','数学','概率论大数定律'],['ST001','2025-07-29','英语','考前冲刺复习'],['ST001','2025-07-29','专业课','信息论基础'],['ST002','2025-07-29','数学','数理统计区间估计'],['ST002','2025-07-29','英语','应试技巧训练'],['ST002','2025-07-29','专业课','密码学原理'],// 7月30日 - 周三\n['ST001','2025-07-30','数学','高等数学曲线积分'],['ST001','2025-07-30','英语','写作模板运用'],['ST001','2025-07-30','专业课','量子计算入门'],['ST002','2025-07-30','数学','线性代数综合应用'],['ST002','2025-07-30','英语','口语表达练习'],['ST002','2025-07-30','专业课','生物信息学'],// 7月31日 - 周四\n['ST001','2025-07-31','数学','概率统计综合复习'],['ST001','2025-07-31','英语','全真模拟考试'],['ST001','2025-07-31','专业课','前沿技术调研'],['ST002','2025-07-31','数学','高等数学总结回顾'],['ST002','2025-07-31','英语','考试心理调适'],['ST002','2025-07-31','专业课','项目实践总结']];// 创建工作簿\nconst wb=XLSX.utils.book_new();const ws=XLSX.utils.aoa_to_sheet(templateData);// 设置列宽\nws['!cols']=[{width:12},// 学生ID\n{width:15},// 日期\n{width:12},// 任务类型\n{width:30}// 任务标题\n];// 添加工作表\nXLSX.utils.book_append_sheet(wb,ws,'任务导入模板');// 生成Excel文件的二进制数据\nconst excelBuffer=XLSX.write(wb,{bookType:'xlsx',type:'array'});// 创建Blob对象\nconst blob=new Blob([excelBuffer],{type:'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'});// 创建下载链接\nconst url=window.URL.createObjectURL(blob);const link=document.createElement('a');link.href=url;// 使用英文文件名避免编码问题\nconst fileName='task_import_template.xlsx';link.download=fileName;// 设置下载属性以确保正确的文件名\nlink.setAttribute('download',fileName);// 触发下载\ndocument.body.appendChild(link);link.click();// 清理\ndocument.body.removeChild(link);window.URL.revokeObjectURL(url);console.log('✅ Excel模板下载成功');}catch(error){console.error('❌ Excel模板下载失败:',error);setError('下载模板失败，请重试');}};// 从Excel数据导入任务\nconst importFromExcel=async()=>{if(!excelData||excelData.length===0){setError('请先选择并解析Excel文件');return;}try{setError(null);// 将Excel数据转换为CSV格式\nconst csvContent=excelData.filter(row=>row.studentId&&row.date&&row.taskType&&row.title).map(row=>`${row.studentId},${row.date},${row.taskType},${row.title}`).join('\\n');if(!csvContent){setError('Excel文件中没有有效的任务数据');return;}const fullCsvData='学生ID,日期,任务类型,任务标题\\n'+csvContent;const response=await adminAPI.bulkImportTasks(fullCsvData);if(response.success){setExcelFile(null);setExcelData([]);setShowExcelImportForm(false);alert(`成功从Excel导入 ${response.data.imported} 个任务`);}else{setError(response.message||'导入任务失败');}}catch(err){setError(err.message||'导入任务失败');}};// 管理员重置所有任务数据\nconst resetAllTasks=async()=>{// 使用专用的管理员重置工具\nconst result=await performAdminReset(adminAPI.resetAllTasks,setStudents,setSelectedStudent,setTaskReport);if(result.success){console.log('✅ 管理员重置成功:',result.data);// 重置报告日期\nsetReportDate(new Date().toISOString().split('T')[0]);}else if(!result.cancelled){console.error('❌ 管理员重置失败:',result.error);setError(result.error);}};// 获取任务报告\nconst fetchTaskReport=async()=>{try{setError(null);const response=await adminAPI.getTaskReport(reportDate);if(response.success){setTaskReport(response.data);}else{setError(response.message||'获取报告失败');}}catch(err){setError(err.message||'获取报告失败');}};// 选择学生\nconst selectStudent=async student=>{setSelectedStudent(student);await fetchStudentProfile(student.id);};// 模拟测试数据\nconst loadTestData=()=>{setTestMode(true);setError(null);setLoading(false);setStudents([{id:'ST001',name:'张三',lastLoginAt:'2024-01-15T10:30:00.000Z',createdAt:'2024-01-01T00:00:00.000Z'},{id:'ST002',name:'李四',lastLoginAt:'2024-01-14T09:15:00.000Z',createdAt:'2024-01-02T00:00:00.000Z'},{id:'ST003',name:'王五',lastLoginAt:null,createdAt:'2024-01-03T00:00:00.000Z'}]);};useEffect(()=>{if(!testMode){// 检查是否有token，如果没有则自动进行管理员登录\nconst token=localStorage.getItem('token');if(!token){handleAdminLogin();}else{fetchStudents();}}},[testMode]);// 管理员快速登录\nconst handleAdminLogin=async()=>{try{setError(null);const response=await fetch('/api/auth/admin/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({studentId:'ADMIN',password:'AdminPass123'})});const data=await response.json();if(data.success){localStorage.setItem('token',data.data.token);localStorage.setItem('user',JSON.stringify({...data.data.admin,studentId:data.data.admin.id,// 为了兼容性\nuserType:'admin'}));window.location.reload();// 重新加载页面以更新认证状态\n}else{setError('管理员登录失败: '+data.message);}}catch(err){setError('管理员登录失败: '+err.message);}};// 退出登录\nconst handleLogout=()=>{logout();window.location.href='/admin';// 重定向到管理员登录页面\n};if(loading){return/*#__PURE__*/_jsx(\"div\",{\"data-testid\":\"admin-dashboard\",className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-gray-600\",children:\"\\u52A0\\u8F7D\\u4E2D...\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{\"data-testid\":\"admin-dashboard\",className:\"p-6 max-w-7xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 flex justify-between items-start\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-800 mb-2\",children:\"\\u7BA1\\u7406\\u5458\\u63A7\\u5236\\u53F0\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"\\u7BA1\\u7406\\u5B66\\u751F\\u3001\\u4EFB\\u52A1\\u548C\\u67E5\\u770B\\u7CFB\\u7EDF\\u62A5\\u544A\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[user&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"\\u6B22\\u8FCE\\u56DE\\u6765\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"font-medium text-gray-800\",children:[user.name,\" (\",user.id||user.studentId,\")\"]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleLogout,className:\"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-colors flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDEAA\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u9000\\u51FA\\u767B\\u5F55\"})]})]})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-md\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleAdminLogin,className:\"px-3 py-1 bg-blue-500 text-white text-sm rounded hover:bg-blue-600\",children:\"\\uD83D\\uDD10 \\u7BA1\\u7406\\u5458\\u767B\\u5F55\"}),/*#__PURE__*/_jsx(\"button\",{onClick:loadTestData,className:\"px-3 py-1 bg-yellow-500 text-white text-sm rounded hover:bg-yellow-600\",children:\"\\uD83E\\uDDEA \\u4F7F\\u7528\\u6D4B\\u8BD5\\u6570\\u636E\"})]})]})}),testMode&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 p-4 bg-yellow-100 border border-yellow-400 text-yellow-800 rounded-md\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83E\\uDDEA \\u5F53\\u524D\\u4F7F\\u7528\\u6D4B\\u8BD5\\u6570\\u636E\\u6A21\\u5F0F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setTestMode(false);setStudents([]);fetchStudents();},className:\"ml-4 px-3 py-1 bg-blue-500 text-white text-sm rounded hover:bg-blue-600\",children:\"\\u91CD\\u65B0\\u8FDE\\u63A5API\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-800\",children:\"\\u5B66\\u751F\\u7BA1\\u7406\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowCreateForm(true),className:\"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600\",children:\"\\u6DFB\\u52A0\\u5B66\\u751F\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:students.map(student=>/*#__PURE__*/_jsx(\"div\",{className:`p-4 border rounded-lg cursor-pointer transition-colors ${(selectedStudent===null||selectedStudent===void 0?void 0:selectedStudent.id)===student.id?'border-blue-500 bg-blue-50':'border-gray-200 hover:border-gray-300'}`,onClick:()=>selectStudent(student),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-800\",children:student.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"ID: \",student.id]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"\\u6CE8\\u518C\\u65F6\\u95F4: \",new Date(student.created_at).toLocaleDateString('zh-CN')]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col space-y-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:`px-2 py-1 rounded text-xs ${student.status==='active'?'bg-green-100 text-green-800':'bg-gray-100 text-gray-800'}`,children:student.status==='active'?'活跃':'非活跃'}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();resetPassword(student.id);},className:\"px-3 py-1 bg-red-500 text-white rounded text-xs hover:bg-red-600\",children:\"\\u91CD\\u7F6E\\u5BC6\\u7801\"})]})]})},student.id))}),students.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400 text-6xl mb-4\",children:\"\\uD83D\\uDC65\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-600 mb-2\",children:\"\\u6682\\u65E0\\u5B66\\u751F\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"\\u70B9\\u51FB\\\"\\u6DFB\\u52A0\\u5B66\\u751F\\\"\\u6309\\u94AE\\u521B\\u5EFA\\u7B2C\\u4E00\\u4E2A\\u5B66\\u751F\\u8D26\\u6237\\u3002\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[selectedStudent&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-800 mb-4\",children:\"\\u5B66\\u751F\\u8BE6\\u60C5\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-500\",children:\"\\u59D3\\u540D\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-gray-900\",children:selectedStudent.name})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-500\",children:\"\\u5B66\\u751FID\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-gray-900 font-mono\",children:selectedStudent.id})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-500\",children:\"\\u6700\\u540E\\u767B\\u5F55\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-gray-900\",children:selectedStudent.last_login_at?new Date(selectedStudent.last_login_at).toLocaleString('zh-CN'):'从未登录'})]}),studentProfile&&studentProfile.profile&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-500\",children:\"\\u6027\\u522B\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-gray-900\",children:studentProfile.profile.gender||'未填写'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-500\",children:\"\\u5E74\\u9F84\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-gray-900\",children:studentProfile.profile.age||'未填写'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-500\",children:\"\\u5B66\\u4E60\\u72B6\\u6001\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-gray-900\",children:studentProfile.profile.studyStatus==='其他'?studentProfile.profile.studyStatusOther||'未填写':studentProfile.profile.studyStatus||'未填写'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-500\",children:\"\\u6570\\u5B66\\u7C7B\\u578B\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-gray-900\",children:studentProfile.profile.mathType==='其他'?studentProfile.profile.mathTypeOther||'未填写':studentProfile.profile.mathType||'未填写'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-500\",children:\"\\u76EE\\u6807\\u5206\\u6570\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-gray-900\",children:studentProfile.profile.targetScore||'未填写'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-500\",children:\"\\u6BCF\\u65E5\\u5B66\\u4E60\\u5C0F\\u65F6\\u6570\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-gray-900\",children:studentProfile.profile.dailyHours||'未填写'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-500\",children:\"\\u9AD8\\u8003\\u4FE1\\u606F\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-gray-900\",children:studentProfile.profile.gaokaoYear!=='未参加'?`${studentProfile.profile.gaokaoYear}年 ${studentProfile.profile.gaokaoProvince} ${studentProfile.profile.gaokaoScore}分`:'未参加'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-500\",children:\"\\u8003\\u7814\\u4FE1\\u606F\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-gray-900\",children:studentProfile.profile.gradExamYear!=='未参加'?`${studentProfile.profile.gradExamYear}年 ${studentProfile.profile.gradExamMathType} ${studentProfile.profile.gradExamScore}分`:'未参加'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-500\",children:\"\\u4E13\\u5347\\u672C\\u4FE1\\u606F\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-gray-900\",children:studentProfile.profile.upgradeExamYear!=='未参加'?`${studentProfile.profile.upgradeExamYear}年 ${studentProfile.profile.upgradeExamProvince} ${studentProfile.profile.upgradeExamMathType} ${studentProfile.profile.upgradeExamScore}分`:'未参加'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-500\",children:\"\\u5DF2\\u8D2D\\u4E70\\u56FE\\u4E66\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-gray-900\",children:studentProfile.profile.purchasedBooks||'未填写'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-500\",children:\"\\u7279\\u6B8A\\u9700\\u6C42\\u5907\\u6CE8\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-gray-900\",children:studentProfile.profile.notes||'未填写'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-500\",children:\"\\u6863\\u6848\\u72B6\\u6001\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-gray-900\",children:/*#__PURE__*/_jsx(\"span\",{className:`px-2 py-1 rounded text-xs ${studentProfile.profile.isProfileSubmitted?'bg-green-100 text-green-800':'bg-yellow-100 text-yellow-800'}`,children:studentProfile.profile.isProfileSubmitted?'已提交':'未提交'})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-500\",children:\"\\u6700\\u540E\\u66F4\\u65B0\\u65F6\\u95F4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-gray-900\",children:studentProfile.profile.updatedAt?new Date(studentProfile.profile.updatedAt).toLocaleString('zh-CN'):'未更新'})]})]}),studentProfile&&!studentProfile.profile&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"\\u8BE5\\u5B66\\u751F\\u5C1A\\u672A\\u586B\\u5199\\u6863\\u6848\\u4FE1\\u606F\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-800 mb-4\",children:\"\\u5FEB\\u901F\\u64CD\\u4F5C\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowTaskForm(true),className:\"w-full px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 text-sm\",children:\"\\uD83D\\uDCDD \\u521B\\u5EFA\\u4EFB\\u52A1\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowExcelImportForm(true),className:\"w-full px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 text-sm\",children:\"\\uD83D\\uDCCA Excel\\u6279\\u91CF\\u5BFC\\u5165\\u4EFB\\u52A1\"}),/*#__PURE__*/_jsx(\"button\",{onClick:resetAllTasks,className:\"w-full px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 text-sm\",children:\"\\uD83D\\uDDD1\\uFE0F \\u91CD\\u7F6E\\u6240\\u6709\\u4EFB\\u52A1\\u6570\\u636E\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"\\u62A5\\u544A\\u65E5\\u671F\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:reportDate,onChange:e=>setReportDate(e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 text-sm\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchTaskReport,className:\"w-full px-4 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600 text-sm\",children:\"\\u751F\\u6210\\u4EFB\\u52A1\\u62A5\\u544A\"}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchStudents,className:\"w-full px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 text-sm\",children:\"\\u5237\\u65B0\\u6570\\u636E\"})]})]}),taskReport&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-800 mb-4\",children:[\"\\u4EFB\\u52A1\\u62A5\\u544A (\",reportDate,\")\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3 text-sm mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"\\u603B\\u4EFB\\u52A1\\u6570\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:taskReport.totalTasks||0})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"\\u5DF2\\u5B8C\\u6210\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-green-600\",children:taskReport.completedTasks||0})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"\\u5B8C\\u6210\\u7387\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold\",children:[taskReport.completionRate||0,\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"\\u6D3B\\u8DC3\\u5B66\\u751F\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:taskReport.activeStudents||0})]})]}),taskReport.studentStats&&taskReport.studentStats.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-md font-medium text-gray-700 mb-3\",children:\"\\u5B66\\u751F\\u5B8C\\u6210\\u60C5\\u51B5\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:taskReport.studentStats.map(student=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center p-2 bg-gray-50 rounded\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-700\",children:student.studentName}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-600\",children:[student.completedTasks,\"/\",student.totalTasks]}),/*#__PURE__*/_jsxs(\"span\",{className:`ml-2 font-medium ${student.completionRate>=80?'text-green-600':student.completionRate>=60?'text-yellow-600':'text-red-600'}`,children:[student.completionRate,\"%\"]})]})]},student.studentId))})]}),taskReport.totalTasks===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-4 text-gray-500\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u8BE5\\u65E5\\u671F\\u6CA1\\u6709\\u4EFB\\u52A1\\u6570\\u636E\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm mt-1\",children:\"\\u8BF7\\u9009\\u62E9\\u5176\\u4ED6\\u65E5\\u671F\\u6216\\u5148\\u5BFC\\u5165\\u4EFB\\u52A1\\u6570\\u636E\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-800 mb-4\",children:\"\\u7CFB\\u7EDF\\u7EDF\\u8BA1\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"\\u603B\\u5B66\\u751F\\u6570\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:students.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"\\u6D3B\\u8DC3\\u5B66\\u751F\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-green-600\",children:students.filter(s=>s.status==='active').length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"\\u4ECA\\u65E5\\u767B\\u5F55\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:students.filter(s=>{if(!s.last_login_at)return false;const today=new Date().toDateString();const loginDate=new Date(s.last_login_at).toDateString();return today===loginDate;}).length})]})]})]})]})]}),showCreateForm&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 w-full max-w-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-800 mb-4\",children:\"\\u6DFB\\u52A0\\u65B0\\u5B66\\u751F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:[\"\\u5B66\\u751F\\u59D3\\u540D \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newStudentName,onChange:e=>setNewStudentName(e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u5B66\\u751F\\u59D3\\u540D\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:createStudent,className:\"flex-1 px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600\",children:\"\\u521B\\u5EFA\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowCreateForm(false);setNewStudentName('');},className:\"flex-1 px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600\",children:\"\\u53D6\\u6D88\"})]})]})]})}),showExcelImportForm&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 w-full max-w-4xl\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-800 mb-4\",children:\"\\uD83D\\uDCCA Excel\\u6279\\u91CF\\u5BFC\\u5165\\u4EFB\\u52A1\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"\\u9009\\u62E9Excel\\u6587\\u4EF6 (.xlsx, .xls)\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:downloadExcelTemplate,className:\"px-3 py-1 bg-blue-500 text-white text-sm rounded-md hover:bg-blue-600 flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDCE5\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u4E0B\\u8F7D\\u6A21\\u677F\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"excel-file-input\",accept:\".xlsx,.xls\",onChange:handleExcelFileChange,className:\"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-full px-3 py-2 border border-gray-300 rounded-md hover:bg-gray-50 cursor-pointer text-left flex items-center justify-center space-x-2 bg-white\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDCC1\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-700\",children:excelFile?`已选择: ${excelFile.name}`:'点击选择Excel文件'})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 border border-blue-200 rounded-md p-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-blue-700 font-medium mb-1\",children:\"\\uD83D\\uDCCB Excel\\u6587\\u4EF6\\u683C\\u5F0F\\u8981\\u6C42\\uFF1A\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"text-xs text-blue-600 space-y-1\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"\\u2022 \\u7B2C\\u4E00\\u5217\\uFF1A\\u5B66\\u751FID\\uFF08\\u5982\\uFF1AST001\\uFF09\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u2022 \\u7B2C\\u4E8C\\u5217\\uFF1A\\u65E5\\u671F\\uFF08\\u683C\\u5F0F\\uFF1AYYYY-MM-DD\\uFF0C\\u5982\\uFF1A2025-07-19\\uFF09\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u2022 \\u7B2C\\u4E09\\u5217\\uFF1A\\u4EFB\\u52A1\\u7C7B\\u578B\\uFF08\\u5982\\uFF1A\\u6570\\u5B66\\u3001\\u82F1\\u8BED\\u3001\\u4E13\\u4E1A\\u8BFE\\u3001\\u4F11\\u606F\\uFF09\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u2022 \\u7B2C\\u56DB\\u5217\\uFF1A\\u4EFB\\u52A1\\u6807\\u9898\\uFF08\\u5982\\uFF1A\\u9AD8\\u7B49\\u6570\\u5B66\\u5FAE\\u5206\\u5B66\\u3001\\u5348\\u4F11\\u3001\\u8BFE\\u95F4\\u4F11\\u606F\\uFF09\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 p-2 bg-green-50 border border-green-200 rounded\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-green-700 font-medium\",children:\"\\uD83C\\uDF1F \\u4F11\\u606F\\u4EFB\\u52A1\\u793A\\u4F8B\\uFF1A\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-green-600\",children:\"\\u4EFB\\u52A1\\u7C7B\\u578B\\u586B\\u5199\\\"\\u4F11\\u606F\\\"\\uFF0C\\u6807\\u9898\\u53EF\\u4EE5\\u662F\\uFF1A\\u5348\\u4F11\\u3001\\u8BFE\\u95F4\\u4F11\\u606F\\u3001\\u665A\\u95F4\\u653E\\u677E\\u3001\\u8FD0\\u52A8\\u65F6\\u95F4\\u7B49\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-blue-600 mt-2\",children:\"\\uD83D\\uDCA1 \\u5EFA\\u8BAE\\u5148\\u4E0B\\u8F7D\\u6A21\\u677F\\u6587\\u4EF6\\uFF0C\\u53C2\\u8003\\u793A\\u4F8B\\u6570\\u636E\\u683C\\u5F0F\\u8FDB\\u884C\\u586B\\u5199\"})]})]}),excelData.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-md font-medium text-gray-700 mb-2\",children:[\"\\u6570\\u636E\\u9884\\u89C8 (\\u5171 \",excelData.length,\" \\u884C)\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"max-h-64 overflow-y-auto border border-gray-300 rounded-md\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50 sticky top-0\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-left\",children:\"\\u5B66\\u751FID\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-left\",children:\"\\u65E5\\u671F\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-left\",children:\"\\u4EFB\\u52A1\\u7C7B\\u578B\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-left\",children:\"\\u4EFB\\u52A1\\u6807\\u9898\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[excelData.slice(0,10).map((row,index)=>/*#__PURE__*/_jsxs(\"tr\",{className:index%2===0?'bg-white':'bg-gray-50',children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 border-t\",children:row.studentId}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 border-t\",children:row.date}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 border-t\",children:row.taskType}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 border-t\",children:row.title})]},index)),excelData.length>10&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsxs(\"td\",{colSpan:\"4\",className:\"px-3 py-2 text-center text-gray-500 border-t\",children:[\"... \\u8FD8\\u6709 \",excelData.length-10,\" \\u884C\\u6570\\u636E\"]})})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-3\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:importFromExcel,disabled:!excelData.length,className:`flex-1 px-4 py-2 rounded-md ${excelData.length?'bg-green-500 text-white hover:bg-green-600':'bg-gray-300 text-gray-500 cursor-not-allowed'}`,children:[\"\\u5BFC\\u5165 (\",excelData.length,\" \\u6761\\u8BB0\\u5F55)\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowExcelImportForm(false);setExcelFile(null);setExcelData([]);},className:\"flex-1 px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600\",children:\"\\u53D6\\u6D88\"})]})]})]})}),showTaskForm&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 w-full max-w-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-800 mb-4\",children:\"\\u521B\\u5EFA\\u65B0\\u4EFB\\u52A1\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:[\"\\u9009\\u62E9\\u5B66\\u751F \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:newTask.studentId,onChange:e=>setNewTask({...newTask,studentId:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u8BF7\\u9009\\u62E9\\u5B66\\u751F\"}),students.map(student=>/*#__PURE__*/_jsxs(\"option\",{value:student.id,children:[student.name,\" (\",student.id,\")\"]},student.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:[\"\\u4EFB\\u52A1\\u6807\\u9898 \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newTask.title,onChange:e=>setNewTask({...newTask,title:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u4EFB\\u52A1\\u6807\\u9898\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"\\u4EFB\\u52A1\\u65E5\\u671F\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:newTask.date,onChange:e=>setNewTask({...newTask,date:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"\\u4EFB\\u52A1\\u7C7B\\u578B\"}),/*#__PURE__*/_jsxs(\"select\",{value:newTask.type,onChange:e=>setNewTask({...newTask,type:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\\u5B66\\u4E60\",children:\"\\u5B66\\u4E60\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u590D\\u4E60\",children:\"\\u590D\\u4E60\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u7EC3\\u4E60\",children:\"\\u7EC3\\u4E60\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u4F5C\\u4E1A\",children:\"\\u4F5C\\u4E1A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u5176\\u4ED6\",children:\"\\u5176\\u4ED6\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:createTask,className:\"flex-1 px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600\",children:\"\\u521B\\u5EFA\\u4EFB\\u52A1\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowTaskForm(false);setNewTask({studentId:'',title:'',date:new Date().toISOString().split('T')[0],type:'学习'});},className:\"flex-1 px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600\",children:\"\\u53D6\\u6D88\"})]})]})]})})]});};export default AdminDashboard;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}